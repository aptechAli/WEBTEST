(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{75557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6616)}])},6616:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return w}});var i=n(828),o=n(85893),s=n(12918),a=n.n(s),l=n(46661),r=n(67446),u=n(41248),c=n(12243),d=n(99691),v=n(67294),f=n(73455),g=n(59562),m=n(60339),S=n(11163),h=n(11796),p=n(59441),y=n(63357),_=n(77561),I=n(18650),E=n(93328),k=n(40013),w=(n(73272),!0);t.default=function(e){var t,n,s,w,b,C,j,N=e.apis,O=e.meta,T=e.error,x=e.token,R=e.dir,D=e.constantSettings,L=e.customBaseUrl,P=e.errorMsg,q=void 0===P?null:P,M=e.apiName,Z=void 0===M?null:M,B=e.externalParentCatSettings,K=e.headerMerchantLinksSettings,A=e.domain,W=void 0===A?null:A,z=e.clientIp;if(T)return 404==T?(0,o.jsx)(a(),{statusCode:404}):403==T?(0,o.jsx)(E.default,{statusCode:"403",message:q,apiName:Z,hostName:W}):"accessbility error"===T?(0,o.jsx)(E.default,{statusCode:"422",message:q,hostName:W}):(0,o.jsx)(a(),{statusCode:500});var J=(0,u.v9)((function(e){return e.settings.staticSettings})),F=(0,u.v9)((function(e){return e.settings.restaurantDetailsSet})),G=(0,u.v9)((function(e){return e.settings.staticSettings.foodOption})),Q=(0,u.v9)((function(e){return e.settings.branchFoodOption})),U=(0,u.v9)((function(e){return e.settings.staticSettings.merchantId})),V=(0,u.v9)((function(e){return e.settings.user})),X=(0,u.v9)((function(e){return e.settings.authToken})),H=(0,u.v9)((function(e){return e.menu.menu})),Y=(0,u.v9)((function(e){return e.menu.categoriesToHide})),$=(0,u.v9)((function(e){return e.menu.outOfStockCategories})),ee=(0,u.v9)((function(e){return e.menu.branchCategories})),te=(0,u.v9)((function(e){return e.menu.branchDisableCategories})),ne=(0,u.v9)((function(e){return e.menu.categoryData})),ie=(0,u.v9)((function(e){return e.settings.meta})),oe=(0,u.v9)((function(e){return e.settings.staticSettings.enableParentCategorySystem})),se=(0,u.v9)((function(e){return e.menu.cartItem})),ae=(k.tO.get(),(0,i.Z)((0,v.useState)([]),2)),le=(ae[0],ae[1],(0,i.Z)((0,v.useState)(!1),2)),re=(le[0],le[1],(0,u.I0)());console.log("loading => token",x);var ue=(0,S.useRouter)().query.dineinmenu,ce=(0,S.useRouter)().query,de=ce.branch_id,ve=ce.table_id,fe=(0,d.Mf)("authToken"),ge=(null===N||void 0===N||null===(t=N.detailsRes)||void 0===t||null===(n=t.staticSettings)||void 0===n||null===(s=n.setting)||void 0===s?void 0:s.api_version)||"0.10.99",me=x||fe,Se=(0,c.fy)(me,ge),he=Se.data,pe=Se.error,ye=Se.isError,_e=(0,c.pf)(me,ge).data;return(0,v.useEffect)((function(){var e=(0,d.Mf)("authToken");x?((0,_.w)(x),re((0,f.uB)(x)),localStorage.setItem("authToken",x)):e&&"undefined"!==e&&((0,_.w)(e),re((0,f.uB)(e)))}),[x]),(0,v.useEffect)((function(){z&&(localStorage.setItem("clientIp",z),re((0,f.qR)(z)))}),[z]),(0,v.useEffect)((function(){X&&(localStorage.setItem("authToken",X),(0,_.w)(X))}),[X]),(0,v.useEffect)((function(){if("1"===ue&&re((0,f.WL)(!0)),de){var e={id:de,branchObj:{id:de,name:"dinein"}};localStorage.setItem("branch",JSON.stringify(e)),re((0,f.RV)(de))}ve&&re((0,f.fC)(ve))}),[ue,de,ve]),(0,v.useEffect)((function(){var e;localStorage.removeItem("pixelPurchaseEventTriggered"),U&&localStorage.getItem("merchantId")!==U&&localStorage.setItem("merchantId",U),U&&document.body.classList.add("merchant-"+U),!0===(null===(e=D[U])||void 0===e?void 0:e.rectangleLogo)&&document.body.classList.add("LogoRectangular")}),[U]),(0,v.useEffect)((function(){var e,t,n,i;(0,h.q)();var o=(0,d.AK)("userDetails");o&&!V&&re((0,f.av)(o));var s=(0,d.AK)("isLoggedIn");if(s&&re((0,f.nf)(s)),localStorage.getItem("siteLogs")||localStorage.setItem("siteLogs",JSON.stringify({url:window.location.href})),null===N||void 0===N||null===(e=N.detailsRes)||void 0===e||null===(t=e.staticSettings)||void 0===t||null===(n=t.setting)||void 0===n||null===(i=n.options)||void 0===i?void 0:i.default_selected_trans_type){var a,l,r,u,c="1"===ue?"Dinein":(null===N||void 0===N||null===(a=N.detailsRes)||void 0===a||null===(l=a.staticSettings)||void 0===l||null===(r=l.setting)||void 0===r||null===(u=r.options)||void 0===u?void 0:u.default_selected_trans_type)||"Delivery";localStorage.setItem("delivery_type",c),re((0,f.gN)(c))}else{var v,g,m=(null===N||void 0===N||null===(v=N.detailsRes)||void 0===v||null===(g=v.staticSettings)||void 0===g?void 0:g.transactionType)||[],S="1"===ue?"Dinein":localStorage.getItem("delivery_type")&&"Dinein"!=localStorage.getItem("delivery_type")?localStorage.getItem("delivery_type"):1==(null===m||void 0===m?void 0:m.length)?m[0]:"Delivery";localStorage.setItem("delivery_type",S),re((0,f.gN)(S))}}),[null===N||void 0===N||null===(w=N.detailsRes)||void 0===w||null===(b=w.staticSettings)||void 0===b||null===(C=b.setting)||void 0===C||null===(j=C.options)||void 0===j?void 0:j.default_selected_trans_type]),(0,v.useMemo)((function(){var e,t,n,i;ne&&(null===(e=Object.keys(ne))||void 0===e?void 0:e.length)&&ee&&(null===(t=Object.keys(ee))||void 0===t?void 0:t.length)||re((0,m.wL)(null));var o=[];for(var s in ee){var a,l,r;!(null===(a=ne[s])||void 0===a?void 0:a.items)||"1"!==G&&"1"!==Q||(null===(l=Object.keys(ee[s]))||void 0===l?void 0:l.length)!==(null===(r=Object.keys(ne[s].items))||void 0===r?void 0:r.length)||o.push(s)}for(var u in ne&&(null===(n=Object.keys(ne))||void 0===n?void 0:n.length)&&te&&(null===(i=Object.keys(te))||void 0===i?void 0:i.length)||re((0,m.zQ)(null)),te)ne&&ne[u]&&o.push(u);o&&(null===o||void 0===o?void 0:o.length)>0?re((0,m.u9)(o)):re((0,m.u9)(null)),re((0,m.Sf)(oe))}),[ee,ne,G,Q,te]),(0,v.useEffect)((function(){N&&N.detailsRes&&!F&&re((0,f.qZ)(N.detailsRes))}),[N]),(0,v.useEffect)((function(){re((0,g.i8)(localStorage.getItem("taxClass")?JSON.parse(localStorage.getItem("taxClass")):null))}),[]),(0,v.useEffect)((function(){he&&(re((0,m.lW)(he.details)),re((0,m.P8)(he.details)),re((0,m.K0)(he.details)),re((0,m.Lr)(he.additionalDetails)),re((0,f.K4)(0)),re((0,f.zN)(0)),re((0,f.gM)(!1)))}),[he]),(0,v.useEffect)((function(){_e&&re((0,g.Wp)(_e.details))}),[_e]),(0,v.useEffect)((function(){H?(re((0,m.cO)((0,d.GQ)(H,Y))),re((0,m.Sf)(oe)),null!=$&&0!=(null===$||void 0===$?void 0:$.length)||re((0,m.zC)((0,d.Cv)(H)))):re((0,f.K4)(1))}),[H,Y,oe]),(0,v.useEffect)((function(){ie||re((0,f.US)(O))}),[O]),(0,v.useEffect)((function(){(null===ie||void 0===ie?void 0:ie.snapChatMeta)&&!window.snaptr&&(!function(e,t,n){if(!e.snaptr){var i=e.snaptr=function(){i.handleRequest?i.handleRequest.apply(i,arguments):i.queue.push(arguments)};i.queue=[];var o="script",s=t.createElement(o);s.async=!0,s.src="https://sc-static.net/scevent.min.js";var a=t.getElementsByTagName(o)[0];a.parentNode.insertBefore(s,a)}}(window,document),window.snaptr("init",ie.snapChatMeta),window.snaptr("track","PAGE_VIEW"))}),[ie]),(0,v.useEffect)((function(){L&&re((0,m.O_)(L))}),[L]),(0,v.useEffect)((function(){if((null===se||void 0===se?void 0:se.length)>0){var e=0;null===se||void 0===se||se.forEach((function(t){(null===t||void 0===t?void 0:t.bulk_order_item)&&e++})),e>=1?(localStorage.setItem("customTime","yes"),re((0,m.sx)(!0))):(localStorage.setItem("customTime","no"),re((0,m.sx)(!1)),localStorage.removeItem("customDeliveryDateTime"))}else localStorage.setItem("customTime","no"),localStorage.removeItem("customDeliveryDateTime")}),[se]),(0,v.useEffect)((function(){ye&&pe&&(console.warn("API Error detected, reloading page in 3 seconds..."),setTimeout((function(){localStorage.removeItem("authToken"),window.location.reload()}),3e3))}),[ye,pe]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(p.ZP,{settings:N.detailsRes&&N.detailsRes.staticSettings?N.detailsRes.staticSettings:J,children:(0,o.jsxs)(I.ZP,{settings:D,externalParentCatSettings:B,headerMerchantLinksSettings:K,children:[(0,o.jsx)(y.Z,{}),(0,o.jsx)(r.Z,{meta:O||ie,domain:W,error:T}),(0,o.jsx)(l.Z,{token:x||fe,dir:R,constantSettings:D})]})})})}}},function(e){e.O(0,[1228,9866,260,1627,1570,3662,1778,5937,5445,3874,4617,6158,4090,9401,1255,8907,6077,2013,6556,1057,8802,9770,3065,4538,4652,8144,6133,1553,1403,8028,7669,3100,587,9774,2888,179],(function(){return t=75557,e(e.s=t);var t}));var t=e.O();_N_E=t}]);