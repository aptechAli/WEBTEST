"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7669],{53974:function(e,i,n){n.d(i,{Z:function(){return q}});var o=n(828),t=n(85893),l=n(67294),r=n(50450);var d=n(36305),s=n(73135),a=n(41248),u=n(59441),c=n(27856),v=n.n(c),m=n(67814),p=n(51436),h=n(72066),f=n(99691),x=function(e){var i=e.item,n=e.showDetails,c=e.nested;(0,s.c)("CartSubItems");var g=(0,o.Z)((0,l.useState)([]),2),_=g[0],y=g[1],N=(0,o.Z)((0,l.useState)([]),2),j=N[0],b=N[1],k=(0,a.v9)((function(e){return e.menu.addonItems})),w=(0,a.v9)((function(e){return e.settings.offers})),S=(0,u.rV)(),C=S.currencySign,M=S.food_item_addon_qty_multiply,I=S.setting,D=null===I||void 0===I?void 0:I.options,z=(0,o.Z)((0,l.useState)((0,f.Mf)("inclusiveTax")),2),O=z[0],F=z[1],Z=(0,o.Z)((0,l.useState)((0,f.Mf)("taxOnDiscount")),2),P=Z[0],X=Z[1];(0,l.useEffect)((function(){F(null===I||void 0===I?void 0:I.inclusive_tax_price),X(null===I||void 0===I?void 0:I.tax_on_discount)}),[I]);var q=function(e){var n,o=e.price,t=(e.qty,e.initial_quantity,e.discount),l=e.discount_type,r=e.exclusive_price,d=e.mulitply_addon_qty;return t&&"0.00"!==t?"fixed"===l?M||d?"".concat(C," ")+(0,h.NM)(o,D):o?"".concat(C," ")+(0,h.NM)(Number(o)-Number(t),D):"-":M||d?"".concat(C," ")+(0,h.NM)(o,D):o?"".concat(C," ")+(1==O&&1==(null===i||void 0===i?void 0:i.non_taxable)&&1!=P||(null===w||void 0===w||null===(n=w.included_categories)||void 0===n?void 0:n.includes(null===i||void 0===i?void 0:i.category_id))?(0,h.NM)(r-Number(r)*Number(t)/100,D):(0,h.NM)(o-Number(o)*Number(t)/100,D)):"-":o?"".concat(C," ")+(0,h.NM)(o,D):"-"};(0,l.useEffect)((function(){y(null===i||void 0===i?void 0:i.sub_item)}),[i,k]);return(0,t.jsxs)(t.Fragment,{children:[_&&(null===_||void 0===_?void 0:_.length)>0&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(r.JX,{xs:"12",className:"cart-item-addons-wrapper ".concat(1===(null===_||void 0===_?void 0:_.length)?"h-auto":"","  ps-0 ").concat((null===j||void 0===j?void 0:j.includes(null===i||void 0===i?void 0:i.cart_item_id))?"h-auto":"","\n                ").concat(n&&!c?"pt-1":c?"ps-2":"","\n            "),children:_.length?null===_||void 0===_?void 0:_.map((function(e,o){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.X2,{className:"m-0 flex-column align-items-center",children:n?(0,t.jsx)(r.JX,{className:"p-0",children:(0,t.jsxs)(r.X2,{className:"m-0",children:[(0,t.jsxs)(r.JX,{xs:"9",className:"indent-from-second-line",children:["+ ",(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:v().sanitize(null===e||void 0===e?void 0:e.sub_item_name)}})]}),(0,t.jsx)(r.JX,{xs:"3",className:"cart-addon-price-wrapper text-right p-0",children:(0,t.jsx)("span",{children:q(e)})})]})}):(0,t.jsxs)(t.Fragment,{children:[(null===e||void 0===e?void 0:e.subcat_name)?(0,t.jsx)(r.JX,{className:"p-0",children:(0,t.jsx)("h6",{children:null===e||void 0===e?void 0:e.subcat_name})}):"",(0,t.jsx)(r.JX,{className:"p-0",children:(0,t.jsxs)(r.X2,{className:"m-0",children:[(0,t.jsxs)(r.JX,{xs:"9",className:"p-0",children:[(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:v().sanitize(null===e||void 0===e?void 0:e.sub_item_name)}}),(null===e||void 0===e?void 0:e.price)?(0,t.jsxs)("b",{children:[" ",null===e||void 0===e?void 0:e.qty,"x ",C," ",(M||(null===e||void 0===e?void 0:e.mulitply_addon_qty))&&(null===e||void 0===e?void 0:e.initial_price)?null===e||void 0===e?void 0:e.initial_price:null===e||void 0===e?void 0:e.price]}):(0,t.jsxs)("b",{children:[" ",null===e||void 0===e?void 0:e.qty,"x -"]})]}),(0,t.jsx)(r.JX,{xs:"3",className:"cart-addon-price-wrapper text-right p-0",children:(0,t.jsx)("span",{children:q(e)})})]})})]})},"".concat(i.cart_item_id).concat(null===e||void 0===e?void 0:e.sub_item_id)),(null===e||void 0===e?void 0:e.hasOwnProperty("selected_nested_addons"))&&(null===e||void 0===e?void 0:e.selected_nested_addons.length)?(0,t.jsx)(x,{item:{sub_item:null===e||void 0===e?void 0:e.selected_nested_addons},showDetails:n,nested:!0}):null]})})):""})}),_&&(null===_||void 0===_?void 0:_.length)>1&&(0,t.jsxs)("span",{className:"view-more-addons",onClick:function(){return function(e){if(null===j||void 0===j?void 0:j.includes(e)){var i=(0,d.Z)(j);i.splice(j.indexOf(e),1),b(i)}else b((0,d.Z)(j).concat([e]))}(null===i||void 0===i?void 0:i.cart_item_id)},children:["View Add-ons ",(0,t.jsx)(m.G,{icon:p.ptq,className:"".concat((null===j||void 0===j?void 0:j.includes(null===i||void 0===i?void 0:i.cart_item_id))?"toggleUp":"")})]})]})},g=x,_=n(2396),y=function(e){var i,n,o=e.item,l=e.showDetails,d=e.inclusiveTax,s=e.taxClass,c=(0,u.rV)(),v=c.setting,m=c.thousandSeperator,p=c.currencySign,h=c.reverse_calculations,f=(0,a.v9)((function(e){return e.tax.taxClasses})),x=(0,a.v9)((function(e){return e.settings.offers})),g=(null===x||void 0===x||null===(i=x.included_categories)||void 0===i?void 0:i.includes(null===o||void 0===o?void 0:o.category_id))?null===x||void 0===x?void 0:x.offer_percentage:0;console.log("CartItemPrice",o);var y=null===s||void 0===s?void 0:s.tax_percentage;return(0,t.jsx)(r.JX,{xs:l?"4":"3",className:"cart-item-price-wrapper text-right p-0",children:(0,t.jsx)("span",{children:(0,_.m)(o,m,d,y,p,null===v||void 0===v||null===(n=v.options)||void 0===n?void 0:n.show_item_wise_discount,null===v||void 0===v?void 0:v.options,f,h,null===v||void 0===v?void 0:v.tax_on_discount,x,g)})})},N=function(e){var i,n,o,l,d=e.item,a=e.handleClick,u=e.showDetails,c=e.inclusiveTax,v=e.taxClass;return(0,s.c)("CartItemTitle"),(0,t.jsx)(t.Fragment,{children:u?(0,t.jsxs)(r.JX,{xs:"5",className:"cart-item-title-wrapper pe-0",onClick:a,children:[(0,t.jsx)("span",{className:"cart-item-title",children:null===d||void 0===d?void 0:d.item_name}),(0,t.jsx)("p",{className:"cart-item-size p-0 m-0",children:(null===d||void 0===d||null===(i=d.size)||void 0===i?void 0:i.size)?"(".concat(null===d||void 0===d||null===(n=d.size)||void 0===n?void 0:n.size.trim(),")"):""}),(0,t.jsx)(y,{item:d,showDetails:!0,inclusiveTax:c,taxClass:v})]}):(0,t.jsx)(r.JX,{xs:"8",md:"8",className:"cart-item-title-wrapper px-0",children:(0,t.jsxs)("span",{className:"cart-item-title",children:[null===d||void 0===d?void 0:d.qty," x ",null===d||void 0===d?void 0:d.item_name,(0,t.jsx)("span",{className:"fs-08",children:(null===d||void 0===d||null===(o=d.size)||void 0===o?void 0:o.size)?" (".concat(null===d||void 0===d||null===(l=d.size)||void 0===l?void 0:l.size.trim(),")"):""})]})})})},j=function(e){var i=e.note;return(0,s.c)("CartItemNotes"),(0,t.jsx)("p",{className:"m-0",children:(0,f.eB)(i)})},b=n(25675),k=n.n(b),w=function(e){var i=e.item,n=e.handleClick;(0,u.rV)().imageHost;return(0,t.jsx)(r.JX,{xs:"3",className:"cart-item-image-wrapper rounded p-0 overflow-hidden",children:(0,t.jsx)("div",{className:"position-relative m-0",style:{width:"100%",height:"70px"},onClick:n,children:(0,t.jsx)(k(),{src:null===i||void 0===i?void 0:i.image,alt:null===i||void 0===i?void 0:i.item_name,width:70,height:70,style:{objectFit:"fill"},className:"rounded"})})})},S=n(48452),C=n(74685),M=n(60339),I=n(15471),D=n(11163),z=(n(56351),n(73455),n(86896)),O=n(18650),F=n(40013),Z=n(84142);n(38771);var P=function(e){var i=e.item,n=e.visibleItemModal,o=e.inclusiveTax,l=e.taxClass,d=e.handleRemoveClick;return(0,t.jsxs)(r.X2,{className:"cart-item align-items-center m-0 mt-2",children:[(0,t.jsx)(w,{item:i,handleClick:n(i)}),(0,t.jsx)(N,{item:i,handleClick:n(i),showDetails:!0,inclusiveTax:o,taxClass:l}),(0,t.jsx)(r.JX,{xs:"4",className:"pe-0 ms-auto counter-controlls",children:(0,t.jsx)(S.Z,{item:i,handleRemove:function(e){d(i.cart_item_id)}})}),(0,t.jsx)(g,{item:i,showDetails:!0}),(null===i||void 0===i?void 0:i.order_notes)?(0,t.jsx)(r.JX,{xs:"12",className:"p-0 checkout-cart-notess",children:(0,t.jsx)(j,{note:i.order_notes})}):(0,t.jsx)(t.Fragment,{})]},null===i||void 0===i?void 0:i.cart_item_id)},X=function(e){var i,n=e.item,o=(e.visibleItemModal,e.inclusiveTax),l=e.taxClass,d=(e.bulkItemInCart,e.dispatch,e.intl,e.constantSettings),s=e.merchantId,a=e.handleRemoveClick;return(0,t.jsx)(r.X2,{className:"cart-item align-items-center m-0 mt-2",children:(null===(i=d[s])||void 0===i?void 0:i.isCartShowWithImageAndCounter)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{item:n}),(0,t.jsx)(N,{item:n,showDetails:!0}),(0,t.jsxs)(r.JX,{xs:"4",className:"pe-0 ms-auto",children:[(0,t.jsx)(y,{item:n,showDetails:!0,inclusiveTax:o,taxClass:l}),(0,t.jsx)(S.Z,{item:n,handleRemove:function(e){a(null===n||void 0===n?void 0:n.cart_item_id)}})]}),(0,t.jsx)(g,{item:n,showDetails:!0}),(0,t.jsx)(r.JX,{xs:"12",className:"p-0 checkout-cart-notess",children:(0,t.jsx)(j,{note:null===n||void 0===n?void 0:n.order_notes})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N,{item:n}),(0,t.jsx)(y,{item:n,showDetails:!0,inclusiveTax:o,taxClass:l}),(0,t.jsx)(g,{item:n,showDetail:!1}),(0,t.jsxs)(r.JX,{xs:"12",className:"p-0 checkout-cart-notess",children:[(0,t.jsx)(j,{note:null===n||void 0===n?void 0:n.order_notes}),(0,t.jsx)(t.Fragment,{})]})]})},null===n||void 0===n?void 0:n.cart_item_id)},q=function(e){var i=e.inclusiveTax,n=e.taxClass;(0,s.c)("CartItem");var r=(0,o.Z)((0,l.useState)(!1),2),d=r[0],c=r[1],v=(0,o.Z)((0,l.useState)(null),2),m=v[0],p=v[1],h=(0,a.v9)((function(e){return e.menu.cartItem})),x=(0,a.v9)((function(e){return e.menu.bulkItemInCart})),g=(0,a.v9)((function(e){return e.menu.categoryData})),_=((0,a.v9)((function(e){return e.settings.selectedLanguage})),(0,a.v9)((function(e){return e.settings.offers}))),y=(0,a.v9)((function(e){return e.tax.taxClasses})),N=(0,a.I0)(),j=(0,z.Z)(),b=(0,u.rV)(),k=b.isProductPageOn,w=b.merchantId,S=b.setting,q=b.dengage_account_id,J=b.dengage_app_guid,T=b.thousandSeperator,E=b.currencySign,A=b.reverse_calculations,W=(0,O.Lc)(),R=(0,D.useRouter)(),B=R.components,L=(Object.entries(B)[0][1].props.pageProps.slug,(0,o.Z)((0,l.useState)(!0),2)),V=L[0],H=L[1];(0,l.useEffect)((function(){window.location.pathname.includes("guestcheckout")&&H(!1)}),[W]);var U=function(){return c(!d)},K=function(e){p(e),U()},$=function(e){return function(o){var t,l,r,d,s;if(V){var a=g&&g[null===e||void 0===e?void 0:e.category_id]&&(null===(t=g[null===e||void 0===e?void 0:e.category_id])||void 0===t?void 0:t.items)?null===(l=g[null===e||void 0===e?void 0:e.category_id])||void 0===l?void 0:l.items[null===e||void 0===e?void 0:e.item_id]:null;if(a){var u=null===a||void 0===a?void 0:a.item_slug;N((0,M.Pt)(!1));var c=null===S||void 0===S?void 0:S.tax_on_discount,v=null===S||void 0===S?void 0:S.options,m=(null===_||void 0===_||null===(r=_.included_categories)||void 0===r?void 0:r.includes(null===a||void 0===a||null===(d=a.category_info)||void 0===d?void 0:d.cat_id))?null===_||void 0===_?void 0:_.offer_percentage:0,p=(0,f.X6)(e,a,n,i,c,v,m),h=p.selected,x=p.selectedNested,y=p.multiAddonQty,j=p.multiNestedAddonQty,b=p.subItemPrice,w=p.totalPrice;if(null===e||void 0===e?void 0:e.item_id)N((0,M.Zw)(!0));else{localStorage.setItem("modalItemId",u);R.query.slug;var C=new URL(window.location.origin);for(var I in R.query)"slug"==I?C.pathname=R.query.slug:C.searchParams.set(I,R.query[I]);C.searchParams.set("item",u),R.push(C.pathname+C.search,null,{shallow:!0}).then((function(e){e&&N((0,M.Zw)(!0))}))}N((0,M.Bw)(j)),N((0,M.FQ)(y)),N((0,M.Zq)(h)),N((0,M.Lq)(x)),N((0,M.Pn)(null===e||void 0===e?void 0:e.order_notes)),N((0,M.uX)("Update Cart")),N((0,M.FK)(null===e||void 0===e?void 0:e.item_id)),N((0,M.dF)(null===e||void 0===e?void 0:e.category_id)),N((0,M.HA)(w+b)),N((0,M.tS)()),N((0,M.h8)(null===e||void 0===e?void 0:e.qty)),N((0,M.gp)((null===e||void 0===e?void 0:e.category_id)+(null===e||void 0===e?void 0:e.item_id))),N((0,M.kU)(null===e||void 0===e?void 0:e.sub_item)),N((0,M.A9)(null===e||void 0===e?void 0:e.cart_item_id)),k&&JSON.stringify(localStorage.setItem("hashForProductPage",null===e||void 0===e?void 0:e.cart_item_id)),y&&localStorage.setItem("quantForProductPage",JSON.stringify(y)),N((0,M.yk)(null===e||void 0===e?void 0:e.size)),N((0,M.ZB)(null===e||void 0===e||null===(s=e.size)||void 0===s?void 0:s.size_id))}}}};return(0,l.useEffect)((function(){if(g&&h&&!R.asPath.includes("product")){var e=F.tO.getData("indoljCartObj"),i=JSON.parse(e),n=(null===i||void 0===i?void 0:i.items)||[],o=function(e,i){var n=i.filter((function(i){var n,o,t=null===(n=e[null===i||void 0===i?void 0:i.category_id])||void 0===n||null===(o=n.items)||void 0===o?void 0:o[i.item_id];return Boolean(t)}));return n}(g,h);JSON.stringify(o)!==JSON.stringify(h)&&(N((0,M.ZW)(o)),JSON.stringify(o)!==JSON.stringify(n)&&F.tO.save({items:o}))}}),[g,h]),(0,t.jsxs)("div",{className:"overflow-y-auto",children:[h&&(null===h||void 0===h?void 0:h.length)?null===h||void 0===h?void 0:h.map((function(e){return V?(0,t.jsx)(P,{item:e,visibleItemModal:$,inclusiveTax:i,taxClass:n,handleRemoveClick:K}):(0,t.jsx)(X,{item:e,visibleItemModal:$,inclusiveTax:i,taxClass:n,bulkItemInCart:x,dispatch:N,showUpdateButton:V,intl:j,constantSettings:W,merchantId:w,handleRemoveClick:K})})):(0,t.jsx)(t.Fragment,{}),(0,t.jsx)(Z.Z,{isOpen:d,toggle:U,onConfirm:function(){if(m){var e=0;N((0,I.BA)(""));h.map((function(i){(null===i||void 0===i?void 0:i.bulk_order_item)&&e++}));var i=(0,C.B8)(m,q,J,T,_,E,null===S||void 0===S?void 0:S.options,A,n,y,null===S||void 0===S?void 0:S.tax_on_discount);N((0,M.ZW)(i));var o={},t=0;null===i||void 0===i||i.forEach((function(e){o[null===e||void 0===e?void 0:e.item_id]=e,(null===e||void 0===e?void 0:e.bulk_order_item)&&t++})),N(e>=1?(0,M.VK)(!0):(0,M.VK)(!1)),N((0,M.yU)(o)),x||N((0,M.sx)(!1)),0===t&&N((0,M.sx)(!1)),U()}}})]})}},30325:function(e,i,n){n.d(i,{Z:function(){return M}});var o=n(828),t=n(85893),l=n(67294),r=n(50450),d=n(87840),s=n(73135),a=n(2396),u=n(6158),c=n(99691),v=n(41248),m=n(73455),p=n(59441),h=n(72066),f=n(86896);u.ZP.currencyUnit;var x=function(e){var i,n,u=e.subTotal,x=(e.discount,e.disableItemwiseFreeDeliveryMsg),g=e.isDeliveryFree,_=e.deliveryCharges,y=e.itemAdditionalDc,N=e.tax;(0,s.c)("CartMessage");var j,b,k,w,S,C,M=(0,v.v9)((function(e){return e.settings.freeDeliveryAbovePrice})),I=(0,p.rV)(),D=I.setting,z=I.currencySign,O=I.thousandSeperator,F=I.include_tax_in_free_delivery_calculation,Z=(0,v.v9)((function(e){return e.settings.deliveryType})),P=(0,v.v9)((function(e){return e.settings.selectedArea})),X=(0,v.v9)((function(e){return e.checkout.freeDeliveryMsg})),q=(0,v.v9)((function(e){return e.checkout.freeDeliveryDay})),J=(0,o.Z)((0,l.useState)(!1),2),T=J[0],E=J[1],A=(0,o.Z)((0,l.useState)(!1),2),W=A[0],R=A[1],B=(0,o.Z)((0,l.useState)(!1),2),L=B[0],V=B[1],H=(0,o.Z)((0,l.useState)(!1),2),U=H[0],K=H[1],$=(0,v.I0)(),Q=(0,f.Z)(),Y=(null===D||void 0===D||null===(i=D.options)||void 0===i?void 0:i.branchwise_timings)?(0,d.Fl)():parseInt(M);(0,l.useEffect)((function(){Y||(Y=parseInt(M))}),[M]),(null===D||void 0===D||null===(n=D.options)||void 0===n?void 0:n.branchwise_timings)?"Pickup"==Z?(b=Number(null===D||void 0===D||null===(k=D.merchantInfo)||void 0===k?void 0:k.pickup_minimum_order),!(0,c.Mf)("min_for_order_pickup")&&b&&localStorage.setItem("min_for_order_pickup",b)):(j=(0,d.Q$)())||(j=Number(null===D||void 0===D||null===(w=D.merchantInfo)||void 0===w?void 0:w.delivery_minimum_order),!(0,c.Mf)("minOrder")&&j&&localStorage.setItem("minOrder",j)):"Pickup"==Z?(b=Number(null===D||void 0===D||null===(S=D.merchantInfo)||void 0===S?void 0:S.pickup_minimum_order),!(0,c.Mf)("min_for_order_pickup")&&b&&localStorage.setItem("min_for_order_pickup",b)):(j=Number(null===D||void 0===D||null===(C=D.merchantInfo)||void 0===C?void 0:C.delivery_minimum_order),!(0,c.Mf)("minOrder")&&j&&localStorage.setItem("minOrder",j));var G=(0,h.NM)(Y-(u+(F?N:0)),null===D||void 0===D?void 0:D.options),ee=(0,h.NM)(j-u,null===D||void 0===D?void 0:D.options),ie=(0,h.NM)(b-(u+(F?N:0)),null===D||void 0===D?void 0:D.options);return(0,l.useEffect)((function(){var e;(null===D||void 0===D||null===(e=D.options)||void 0===e?void 0:e.branchwise_timings)&&$((0,m.rS)((0,d.Fl)()))}),[D,P,Z,u]),(0,l.useEffect)((function(){R(!(j>0&&u>=j)&&(j>0&&u<j)),V(!(b>0&&u>=b&&"Pickup"==Z)&&(b>0&&u<b&&"Pickup"==Z)),Y>0&&u+(F?N:0)>=Y?(K(!0),E(!1)):Y>0&&u+(F?N:0)<Y&&!x&&!g()?(K(!1),E(!0)):(E(!1),K(!1)),window.location.pathname.includes("guestcheckout")&&(K(!1),E(!1))}),[u,Z,P]),(0,t.jsx)(r.X2,{className:"m-0",children:(0,t.jsxs)(r.JX,{children:[_||y||X||!(null===P||void 0===P?void 0:P.label)||T||U||"Delivery"!=Z?null:(0,t.jsx)(t.Fragment,{children:q||"1"===(0,d._W)()?(0,t.jsx)("p",{className:"text-center cart-delivery-msg-wrapper",children:"Free Delivery!"}):null}),(W||T||U||q&&X)&&"Delivery"==Z&&(0,t.jsxs)(t.Fragment,{children:[W?(0,t.jsx)("div",{className:"cart-msg-wrapper",children:(0,t.jsxs)("p",{children:[Q.formatMessage({id:"youAre"})," ",(0,t.jsxs)("b",{children:[z," ",(0,a.F)(ee,O,z)]})," ",Q.formatMessage({id:"awayFromMinOrder"})]})}):"",q?X?(0,t.jsx)("div",{className:"cart-msg-wrapper",children:(0,t.jsx)("p",{children:X})}):(0,t.jsx)("div",{className:"cart-msg-wrapper",children:(0,t.jsx)("p",{children:Q.formatMessage({id:"freeDeliveryMsg"})})}):T?(0,t.jsx)("div",{className:"cart-msg-wrapper",children:(0,t.jsxs)("p",{children:[Q.formatMessage({id:"addItemsWorth"})," ",(0,t.jsxs)("b",{children:[z," ",(0,a.F)(G,O)]}),", ",Q.formatMessage({id:"toGetFreeDelivery"})]})}):X?(0,t.jsx)("div",{className:"cart-msg-wrapper",children:(0,t.jsx)("p",{children:X})}):U?(0,t.jsx)("div",{className:"cart-msg-wrapper",children:(0,t.jsx)("p",{children:Q.formatMessage({id:"freeDeliveryMsg"})})}):null]}),L&&"Pickup"==Z?(0,t.jsx)("div",{className:"cart-msg-wrapper",children:(0,t.jsxs)("p",{children:[Q.formatMessage({id:"youAre"})," ",(0,t.jsxs)("b",{children:[z," ",(0,a.F)(ie,O,z)]})," ",Q.formatMessage({id:"awayFromMinOrder"})]})}):null]})})},g=n(60339),_=n(15471),y=n(59562),N=n(25675),j=n.n(N),b=n(40013),k=n(56675),w=n(11163),S=n(8842),C=n(18650);var M=function(e){var i,n,u,N,M,I,D,z=e.CartItem,O=e.headingshow,F=e.top,Z=e.pastOrderCartItem;(0,s.c)("CartTotal");var P=Z&&(null===Z||void 0===Z?void 0:Z.length)>0?Z:(0,v.v9)((function(e){return e.menu.cartItem}));console.log(P,"==>cartItem");var X,q,J,T=(0,v.v9)((function(e){return e.menu.total})),E=(0,v.v9)((function(e){return e.checkout})),A=E.voucherCode,W=E.showVoucherPercentage,R=(0,v.v9)((function(e){return e.tax.taxApiLoading})),B=((0,v.v9)((function(e){return e.checkout.freeDeliveryMsg})),(0,v.v9)((function(e){return e.checkout.freeDeliveryDay}))),L=(0,v.v9)((function(e){return e.settings.taxMessage})),V=(0,v.v9)((function(e){return e.settings.staticSettings.merchantId})),H=(0,v.v9)((function(e){return e.menu})).branchFreeDeliveryOnPaymentType,U=(0,v.v9)((function(e){return e.checkout.voucherDiscount})),K=(0,v.v9)((function(e){return e.checkout.deliveryCharges})),$=(0,v.v9)((function(e){return e.checkout.beingUseLoyalyPoint})),Q=(0,v.v9)((function(e){return e.checkout.usedWalletAmount})),Y=(0,v.v9)((function(e){return e.checkout.subTotal})),G=(0,v.v9)((function(e){return e.checkout.tipPercentageForTotal})),ee=((0,v.v9)((function(e){return e.checkout.tipPercentageForOrder})),(0,v.v9)((function(e){return e.checkout.discountedSubTotal}))),ie=(0,v.v9)((function(e){return e.checkout.voucherApplicable})),ne=(0,v.v9)((function(e){return e.settings.freeDeliveryAbovePrice})),oe=(0,v.v9)((function(e){return e.checkout})),te=oe.paymentOpt,le=oe.freeDeliveryOnPaymentTypes,re=(0,v.v9)((function(e){return e.settings.offers})),de=(0,p.rV)(),se=de.setting,ae=de.thousandSeperator,ue=de.merchantDeliveryCharges,ce=de.currencySign,ve=de.isMerchantTip,me=de.merchantFreeDeliveryOverCharges,pe=de.merchantInfo,he=de.reverse_calculations,fe=de.hide_tax_percentage,xe=de.food_item_addon_qty_multiply,ge=de.theme,_e=de.third_party_loyalty_service,ye=de.third_party_loyalty_service_enabled,Ne=(0,C.Lc)(),je=((0,v.v9)((function(e){return e.settings.selectedCity})),(0,v.v9)((function(e){return e.settings.selectedArea}))),be=(0,v.v9)((function(e){return e.settings.deliveryType})),ke=(0,v.v9)((function(e){return e.tax.taxClass})),we=(0,v.v9)((function(e){return e.tax.taxClasses})),Se=(0,v.v9)((function(e){return e.tax.taxPercentage})),Ce=null===se||void 0===se||null===(i=se.options)||void 0===i?void 0:i.loyalty_point_value,Me=(0,v.v9)((function(e){return e.settings.isLoggedIn})),Ie=JSON.parse(b.tO.getData("area")),De=!!(null===(n=Ne[V])||void 0===n?void 0:n.isDiscountMsgWiseShow);Ie&&(X=Number(Ie.weight_charges),q=Number(Ie.additional_weight_charges),J=Number(Ie.end_weight_range));var ze=(0,v.I0)(),Oe=(0,f.Z)(),Fe=(0,w.useRouter)(),Ze=A||"",Pe=(0,o.Z)((0,l.useState)(0),2),Xe=Pe[0],qe=Pe[1],Je=(0,o.Z)((0,l.useState)(0),2),Te=Je[0],Ee=Je[1],Ae=(0,o.Z)((0,l.useState)(0),2),We=(Ae[0],Ae[1]),Re=(0,o.Z)((0,l.useState)(0),2),Be=Re[0],Le=Re[1],Ve=(0,o.Z)((0,l.useState)((0,c.Mf)("inclusiveTax")),2),He=Ve[0],Ue=(Ve[1],(0,o.Z)((0,l.useState)((0,c.Mf)("taxOnDiscount")),2)),Ke=Ue[0],$e=(Ue[1],(0,o.Z)((0,l.useState)(""),2)),Qe=$e[0],Ye=$e[1],Ge=(0,o.Z)((0,l.useState)(0),2),ei=(Ge[0],Ge[1]),ii=(0,o.Z)((0,l.useState)(0),2),ni=ii[0],oi=ii[1],ti=(0,o.Z)((0,l.useState)(0),2),li=ti[0],ri=ti[1],di=(0,o.Z)((0,l.useState)(!1),2),si=di[0],ai=di[1],ui=(0,o.Z)((0,l.useState)(0),2),ci=ui[0],vi=ui[1],mi=(0,o.Z)((0,l.useState)(!1),2),pi=mi[0],hi=mi[1],fi=(0,o.Z)((0,l.useState)(0),2),xi=fi[0],gi=fi[1],_i=(0,o.Z)((0,l.useState)(0),2),yi=_i[0],Ni=_i[1],ji=(0,o.Z)((0,l.useState)([]),2),bi=ji[0],ki=ji[1];(0,l.useEffect)((function(){var e=null===P||void 0===P?void 0:P.filter((function(e){return parseInt(null===e||void 0===e?void 0:e.tax_class_id)>0}));ki(e)}),[P]),(0,l.useEffect)((function(){var e,i=b.tO.getData("branchFreeDeliveryOnPaymentType");"/guestcheckout"==Fe.pathname&&((null===(e=JSON.parse(i))||void 0===e?void 0:e.length)>0?ze((0,g.dB)(JSON.parse(i))):ze((0,g.dB)([])))}),[]),(0,l.useEffect)((function(){var e,i;Ye(null===se||void 0===se||null===(e=se.options)||void 0===e?void 0:e.add_discount_in_minimum_order),ai(null===se||void 0===se?void 0:se.options);var n=(0,c.AK)("offers");ze((0,m.Zu)(n)),(null===window||void 0===window||null===(i=window.location)||void 0===i?void 0:i.pathname.includes("guestcheckout"))||ze((0,_.BA)(""))}),[se]),(0,l.useEffect)((function(){var e;if("1"===(null===se||void 0===se||null===(e=se.options)||void 0===e?void 0:e.apply_discount_on_delivery_charges)&&K){var i=(null===re||void 0===re?void 0:re.offer_percentage)||0,n=Number(K*(i/100));ri(n)}}),[se,K,re]),(0,l.useEffect)((function(){Si()}),[K,U,A,Y,be,P,je,we,re,Se,$,te,Q,H]),(0,l.useEffect)((function(){ke?(ze((0,y.H2)(Number(null===ke||void 0===ke?void 0:ke.tax_percentage))),localStorage.setItem("taxClass",JSON.stringify(ke))):ze((0,y.H2)(0))}),[ke,he]),(0,l.useEffect)((function(){if(ze((0,_.Rz)(0)),G&&null!==G.percent){"Delivery"===be&&ni>0||"Delivery"===be&&li>0?(0,a.F)((0,h.NM)(T+ni-li,si),ae):(0,a.F)((0,h.NM)(T,si),ae);var e=G.percent;G&&"empty"===G.percent?(vi(G.Amount),ze((0,_.Rz)(G.Amount))):(vi(e),ze((0,_.Rz)(e)))}else vi(0)}),[G]);var wi=function(e,i){var n=null===e||void 0===e?void 0:e.tax_class_id;return i&&n&&i[n]||null},Si=function(){var e,i,n,o,t=0,l=0,r=0,s=0,a=0,u=0,c=0,v=0;if(P.length&&P.forEach((function(e){var i,n,d=wi(e,we),m=(d?null===d||void 0===d?void 0:d.tax_percentage:Se)/100,p=0,h=0;if((null===e||void 0===e?void 0:e.sub_item)&&Object.keys(null===e||void 0===e?void 0:e.sub_item).length&&Object.keys(null===e||void 0===e?void 0:e.sub_item).forEach((function(i){var n,o,t=null===e||void 0===e?void 0:e.sub_item[i];(null===t||void 0===t?void 0:t.qty)&&((null===t||void 0===t?void 0:t.discount)&&"0.00"!==(null===t||void 0===t?void 0:t.discount)?(null===t||void 0===t?void 0:t.mulitply_addon_qty)||xe?h+=(null===t||void 0===t?void 0:t.initial_price)*(null===t||void 0===t?void 0:t.qty):"fixed"===(null===t||void 0===t?void 0:t.discount_type)?(h+=(Number(null===t||void 0===t?void 0:t.price)-Number(null===t||void 0===t?void 0:t.discount))*(null===t||void 0===t?void 0:t.qty),p+=Number(null===t||void 0===t?void 0:t.discount)):(h+=(1==He&&1==(null===e||void 0===e?void 0:e.non_taxable)&&1!=Ke||(null===re||void 0===re||null===(n=re.included_categories)||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.category_id))?Number(null===t||void 0===t?void 0:t.exclusive_price)-Number(null===t||void 0===t?void 0:t.exclusive_price)*Number(null===t||void 0===t?void 0:t.discount)/100:Number(null===t||void 0===t?void 0:t.price)-Number(null===t||void 0===t?void 0:t.price)*Number(null===t||void 0===t?void 0:t.discount)/100)*(null===t||void 0===t?void 0:t.qty),p+=1==He&&1==(null===e||void 0===e?void 0:e.non_taxable)&&1!=Ke||(null===re||void 0===re||null===(o=re.included_categories)||void 0===o?void 0:o.includes(null===e||void 0===e?void 0:e.category_id))?Number(null===t||void 0===t?void 0:t.exclusive_price)*Number(null===t||void 0===t?void 0:t.discount)/100:Number(null===t||void 0===t?void 0:t.price)*Number(null===t||void 0===t?void 0:t.discount)/100):1==Ke||(null===t||void 0===t?void 0:t.exclusive_price)?h+=(null===t||void 0===t?void 0:t.exclusive_price)*(null===t||void 0===t?void 0:t.qty):h+=(null===t||void 0===t?void 0:t.price)*(null===t||void 0===t?void 0:t.qty));(null===t||void 0===t?void 0:t.selected_nested_addons)&&(null===t||void 0===t||t.selected_nested_addons.forEach((function(e){(null===e||void 0===e?void 0:e.discount)&&"0.00"!==(null===e||void 0===e?void 0:e.discount)?"fixed"===(null===e||void 0===e?void 0:e.discount_type)?(h+=(Number(null===e||void 0===e?void 0:e.price)-Number(null===e||void 0===e?void 0:e.discount))*(null===e||void 0===e?void 0:e.qty),p+=Number(null===e||void 0===e?void 0:e.discount)):(h+=(Number(null===e||void 0===e?void 0:e.price)-Number(null===e||void 0===e?void 0:e.price)*Number(null===e||void 0===e?void 0:e.discount)/100)*(null===e||void 0===e?void 0:e.qty),p+=Number(null===e||void 0===e?void 0:e.price)*Number(null===e||void 0===e?void 0:e.discount)/100):(null===e||void 0===e?void 0:e.qty)&&(h+=(null===e||void 0===e?void 0:e.qty)*(null===e||void 0===e?void 0:e.price))})))})),"fixed_amount"==(null===e||void 0===e?void 0:e.discount_type)){var f,x,g,_,y,N,j,b,k;if(null===e||void 0===e||null===(f=e.size)||void 0===f?void 0:f.discounted_price)o=(null===e||void 0===e?void 0:e.qty)*(null===e||void 0===e||null===(x=e.size)||void 0===x?void 0:x.discounted_price)+h,a=(null===e||void 0===e?void 0:e.qty)*((null===e||void 0===e||null===(g=e.size)||void 0===g?void 0:g.price)?null===e||void 0===e||null===(_=e.size)||void 0===_?void 0:_.price:0)+h;else o=(null===e||void 0===e?void 0:e.qty)*((null===e||void 0===e||null===(y=e.size)||void 0===y?void 0:y.price)?null===e||void 0===e||null===(N=e.size)||void 0===N?void 0:N.price:0)+h,a=(null===e||void 0===e?void 0:e.qty)*((null===e||void 0===e||null===(j=e.size)||void 0===j?void 0:j.price)?null===e||void 0===e||null===(b=e.size)||void 0===b?void 0:b.price:0)+h;if(null===e||void 0===e?void 0:e.size_discount){if(Array.isArray(null===e||void 0===e?void 0:e.size_discount)&&(null===e||void 0===e?void 0:e.size_discount.length)>1){k=null===e||void 0===e?void 0:e.size_discount[0];var w,S=Object.keys(k);if((S=S[0])&&!isNaN(S))k=(k=k[null===e||void 0===e||null===(w=e.size)||void 0===w?void 0:w.size_id])&&Object.keys(k)?Object.keys(k)[0]:0;else k=0}else{var C,M=Object.keys(null===e||void 0===e?void 0:e.size_discount);if((M=M[0])&&!isNaN(M))k=(k=null===e||void 0===e?void 0:e.size_discount[null===e||void 0===e||null===(C=e.size)||void 0===C?void 0:C.size_id])&&Object.keys(k)?Object.keys(k)[0]:0;else k=0}l+=k*(null===e||void 0===e?void 0:e.qty),k||(l+=(null===e||void 0===e?void 0:e.discount)*(null===e||void 0===e?void 0:e.qty))}else l+=(null===e||void 0===e?void 0:e.discount)*(null===e||void 0===e?void 0:e.qty);he&&"1"==(null===e||void 0===e?void 0:e.non_taxable)?t+=isNaN(o)?0+h/(1+m):o/(1+m):t+=isNaN(o)?0+h:o}else if("percentage"==(null===e||void 0===e?void 0:e.discount_type)){var I,D,z,O,F,Z,P,X,q;if(null===e||void 0===e||null===(I=e.size)||void 0===I?void 0:I.discounted_price)o=(null===e||void 0===e?void 0:e.qty)*(null===e||void 0===e||null===(D=e.size)||void 0===D?void 0:D.discounted_price)+h,a=(null===e||void 0===e?void 0:e.qty)*((null===e||void 0===e||null===(z=e.size)||void 0===z?void 0:z.price)?null===e||void 0===e||null===(O=e.size)||void 0===O?void 0:O.price:0)+h;else o=(null===e||void 0===e?void 0:e.qty)*((null===e||void 0===e||null===(F=e.size)||void 0===F?void 0:F.price)?null===e||void 0===e||null===(Z=e.size)||void 0===Z?void 0:Z.price:0)+h,a=(null===e||void 0===e?void 0:e.qty)*((null===e||void 0===e||null===(P=e.size)||void 0===P?void 0:P.price)?null===e||void 0===e||null===(X=e.size)||void 0===X?void 0:X.price:0)+h;if(null===e||void 0===e?void 0:e.size_discount){var J,T;if(Array.isArray(null===e||void 0===e?void 0:e.size_discount)&&(null===e||void 0===e?void 0:e.size_discount.length)){q=null===e||void 0===e?void 0:e.size_discount[0];var E=Object.keys(q);q=(E=E[0])&&!isNaN(E)&&q&&Object.keys(q)?Object.keys(q)[0]:0}else{var A,W=Object.keys(null===e||void 0===e?void 0:e.size_discount);if((W=W[0])&&!isNaN(W))q=(q=null===e||void 0===e?void 0:e.size_discount[null===e||void 0===e||null===(A=e.size)||void 0===A?void 0:A.size_id])&&Object.keys(q)?Object.keys(q)[0]:0;else q=0}if(l+=(null===e||void 0===e||null===(J=e.size)||void 0===J?void 0:J.price)*q/100*(null===e||void 0===e?void 0:e.qty),!q)l+=(null===e||void 0===e||null===(T=e.size)||void 0===T?void 0:T.price)*(null===e||void 0===e?void 0:e.discount)/100*(null===e||void 0===e?void 0:e.qty)}else{var R;l+=(null===e||void 0===e||null===(R=e.size)||void 0===R?void 0:R.price)*(null===e||void 0===e?void 0:e.discount)/100*(null===e||void 0===e?void 0:e.qty)}he&&"1"==(null===e||void 0===e?void 0:e.non_taxable)?t+=isNaN(o)?0:o/(1+m):t+=isNaN(o)?0:o}else{var B,L,V,H,U,K;o=(null===e||void 0===e?void 0:e.qty)*((null===e||void 0===e||null===(B=e.size)||void 0===B?void 0:B.price)?null===e||void 0===e||null===(L=e.size)||void 0===L?void 0:L.price:0)+h,a=(null===e||void 0===e?void 0:e.qty)*((null===e||void 0===e||null===(V=e.size)||void 0===V?void 0:V.price)?null===e||void 0===e||null===(H=e.size)||void 0===H?void 0:H.price:0)+h,l+=((null===e||void 0===e||null===(U=e.size)||void 0===U?void 0:U.price)?null===e||void 0===e||null===(K=e.size)||void 0===K?void 0:K.price:0*(null===e||void 0===e?void 0:e.discount))/100*(null===e||void 0===e?void 0:e.qty),he&&"1"==(null===e||void 0===e?void 0:e.non_taxable)?t+=isNaN(o)?0:o/(1+m):t+=isNaN(o)?0:o}if(c+=(null===e||void 0===e?void 0:e.qty)*Number(null===e||void 0===e?void 0:e.weight),v+=(null===e||void 0===e?void 0:e.additionalDc)?Number(null===e||void 0===e?void 0:e.additionalDc):0,o=isNaN(o)?0:o,(null===re||void 0===re||null===(i=re.included_categories)||void 0===i?void 0:i.includes(null===e||void 0===e?void 0:e.category_id))&&(o=1==(null===re||void 0===re?void 0:re.exclude_addon)?o-h:o,n=null===re||void 0===re?void 0:re.offer_percentage,"fixed_amount"===(null===re||void 0===re?void 0:re.discount_type)?(r+=Number(n),u=Number(n)):(r+=n*o/100,u=n*o/100),r=Math.min(r,Number(null===re||void 0===re?void 0:re.max_offer_price)),u=Math.min(u,Number(null===re||void 0===re?void 0:re.max_offer_price)),o=1==(null===r||void 0===r?void 0:r.exclude_addon)?o+h:o),o=isNaN(o)?0:o+(1==Ke?0:p),a=isNaN(a)?0:a+(1==Ke?0:p),1==(null===e||void 0===e?void 0:e.non_taxable)){var $,Q,Y,G,ee=wi(e,we),ie=ee?null===ee||void 0===ee?void 0:ee.tax_percentage:Se,ne=ie/100,oe=o/(1+ne),te=a/(1+ne);if(He)if(1==Ke)if(he&&"1"==(null===e||void 0===e?void 0:e.non_taxable))(null===re||void 0===re||null===($=re.included_categories)||void 0===$?void 0:$.includes(null===e||void 0===e?void 0:e.category_id))?s+=ie?(oe-u)*ie/100:0:s+=oe*ne;else(null===re||void 0===re||null===(Q=re.included_categories)||void 0===Q?void 0:Q.includes(null===e||void 0===e?void 0:e.category_id))?s+=ie?(o-u)*ie/100:0:s+=ie?o*ie/100:0;else he&&"1"==(null===e||void 0===e?void 0:e.non_taxable)?s+=te*ne:s+=ie?a*ie/100:0;else if(1==Ke)if(he&&"1"==(null===e||void 0===e?void 0:e.non_taxable))(null===re||void 0===re||null===(Y=re.included_categories)||void 0===Y?void 0:Y.includes(null===e||void 0===e?void 0:e.category_id))?s+=ie?(oe-u)*ie/100:0:s+=oe*ne;else(null===re||void 0===re||null===(G=re.included_categories)||void 0===G?void 0:G.includes(null===e||void 0===e?void 0:e.category_id))?s+=ie?(o-u)*ie/100:0:s+=ie?o*ie/100:0;else he&&"1"==(null===e||void 0===e?void 0:e.non_taxable)?s+=te*ne:s+=ie?a*ie/100:0}})),null===se||void 0===se||null===(e=se.options)||void 0===e?void 0:e.apply_tax_on_delivery_charges){var m=K*(Se/100);oi(m),Le(m+=s),ze((0,_.r0)(m))}else Le(s),ze((0,_.r0)(s));qe(l),Ni(v);var p=0;ei(Math.ceil(c)),p=1==(null===se||void 0===se||null===(i=se.options)||void 0===i?void 0:i.show_item_wise_discount)?Number(r)+l:Number(r),Ee(p),1==(null===se||void 0===se||null===(n=se.options)||void 0===n?void 0:n.show_item_wise_discount)?ze((0,_.Tq)(t+Math.floor(l))):ze((0,_.Tq)(t));var f,x=0;"yes"===Qe||t<(null===re||void 0===re?void 0:re.offer_price)?(x=t,ze((0,_.$E)(t)),ze((0,_.V4)(t))):1==(null===se||void 0===se||null===(f=se.options)||void 0===f?void 0:f.show_item_wise_discount)?(x=t-p+l,ze((0,_.$E)(t-p+l)),ze((0,_.V4)(t-p+l))):(x=t-p,ze((0,_.$E)(t-p)),ze((0,_.V4)(t-p)));P.some((function(e){return"1"!==(null===e||void 0===e?void 0:e.free_delivery_item)}));var y=function(){return!P.some((function(e){return"1"!==(null===e||void 0===e?void 0:e.free_delivery_item)}))};if("Delivery"!=be||B)if((null===se||void 0===se?void 0:se.weight_delivery_charges)&&X&&c&&"Delivery"==be){var N=Number(Math.ceil(c));if(ne&&t>=ne)ze((0,_.qe)(0));else if(N>J){N=(null===Ie||void 0===Ie?void 0:Ie.set_additional_weight_as_delivery_charge)&&"1"==(null===Ie||void 0===Ie?void 0:Ie.set_additional_weight_as_delivery_charge)?N:N-J;var j=q*N,b=(null===Ie||void 0===Ie?void 0:Ie.set_additional_weight_as_delivery_charge)&&"1"==(null===Ie||void 0===Ie?void 0:Ie.set_additional_weight_as_delivery_charge)?q*N:j+Number(X);ze((0,_.qe)(b))}else{var w=Number(X);ze((0,_.qe)(w))}}else ze((0,_.qe)(0));else if((null===se||void 0===se?void 0:se.weight_delivery_charges)&&X&&c){var S=Number(Math.ceil(c));if(ne&&t>=ne)ze((0,_.qe)(0)),localStorage.removeItem("setfreeDeliveryByItems");else if(y())hi(!0),localStorage.setItem("setfreeDeliveryByItems",!0),ze((0,_.qe)(0));else if(localStorage.removeItem("setfreeDeliveryByItems"),S>J){S=(null===Ie||void 0===Ie?void 0:Ie.set_additional_weight_as_delivery_charge)&&"1"==(null===Ie||void 0===Ie?void 0:Ie.set_additional_weight_as_delivery_charge)?S:S-J;var C=q*S,M=(null===Ie||void 0===Ie?void 0:Ie.set_additional_weight_as_delivery_charge)&&"1"==(null===Ie||void 0===Ie?void 0:Ie.set_additional_weight_as_delivery_charge)?q*S:C+Number(X);ze((0,_.qe)(M))}else{var I=Number(X);ze((0,_.qe)(I))}}else y()?(hi(!0),localStorage.setItem("setfreeDeliveryByItems",!0),ze((0,_.qe)(0))):(localStorage.removeItem("setfreeDeliveryByItems"),ze((0,_.qe)((0,d.WT)(x,ue,ne,me))));(null===H||void 0===H?void 0:H.length)>0?(0,k.Eu)(H,te)?ze((0,_.Fl)(!0)):(ze((0,_.qe)(0)),ze((0,_.Fl)(!1))):ze((0,_.Fl)(!0)),Ze.voucher_type||(t>=(null===re||void 0===re?void 0:re.offer_price)?(ze((0,g.o1)(t-r-Mi()-Ci()+K+v+s)),ze((0,g.Hg)(t-r+K))):(ze((0,g.o1)(t-Mi()-Ci()+K+v+s)),ze((0,g.Hg)(t+s+K)))),Ze.voucher_type&&"percentage"==Ze.voucher_type?ie?(ze((0,_.wE)((0,h.NM)(ie*Ze.amount/100>Number(Ze.voucher_max_amt)?Number(Ze.voucher_max_amt):ie*Ze.amount/100,ae))),t>=(null===re||void 0===re?void 0:re.offer_price)?(ze((0,g.o1)(t+v+K-r-U-Mi()-Ci()+s)),ze((0,g.Hg)(t-r+K))):(ze((0,g.o1)(t+v+K-U-Mi()-Ci()+s)),ze((0,g.Hg)(t+s+K)))):(ze((0,_.wE)((0,h.NM)(t*Ze.amount/100>Number(Ze.voucher_max_amt)?Number(Ze.voucher_max_amt):t*Ze.amount/100,ae))),t>=(null===re||void 0===re?void 0:re.offer_price)?(ze((0,g.o1)(t+K-r-U-Ci()+s)),ze((0,g.Hg)(t-r+K))):(ze((0,g.o1)(t+v+K-U-Mi()-Ci()+s)),ze((0,g.Hg)(t+s+K)))):Ze.voucher_type&&"fixed amount"==Ze.voucher_type&&(ze((0,_.wE)((0,h.NM)(Ze.amount,ae))),t>=(null===re||void 0===re?void 0:re.offer_price)?(ze((0,g.o1)(t-r+v+K-Ze.amount-Ci()+s)),ze((0,g.Hg)(t-r+K))):(ze((0,g.o1)(t+v+K-Ze.amount-Mi()-Ci()+s)),ze((0,g.Hg)(t+s+K))))};function Ci(){return $>0?parseFloat($):0}function Mi(){return Q>0?parseFloat(Q):0}(0,l.useEffect)((function(){var e,i;We(Te),(null===re||void 0===re?void 0:re.max_offer_price)>0&&Te>(null===re||void 0===re?void 0:re.max_offer_price)&&Ee(Number(null===re||void 0===re?void 0:re.max_offer_price)),"1"===(null===se||void 0===se||null===(e=se.options)||void 0===e?void 0:e.apply_offer_on_cod_only)&&te&&"cod"!==te&&(ze((0,g.o1)(T+Te)),Ee(0)),(null===se||void 0===se||null===(i=se.options)||void 0===i?void 0:i.apply_discount_on_original_amount)&&te&&"abhipayv3"===te&&(ze((0,g.o1)(T+Te)),Ee(0))}),[Te,Xe,P,re,te]),(0,l.useEffect)((function(){var e=setTimeout((function(){"stp"===te?Ii():gi(0)}),500);return function(){return clearTimeout(e)}}),[T,se,te]);var Ii=function(){var e,i,n,o,t,l,r=0,d=0;if((null===se||void 0===se||null===(e=se.options)||void 0===e?void 0:e.stripe_fee_percentage)&&(null===se||void 0===se||null===(i=se.options)||void 0===i?void 0:i.stripe_client_fee))d=Number(null===se||void 0===se||null===(t=se.options)||void 0===t?void 0:t.stripe_fee_percentage)*T/100,r=Number(null===se||void 0===se||null===(l=se.options)||void 0===l?void 0:l.stripe_client_fee);else if(null===se||void 0===se||null===(n=se.options)||void 0===n?void 0:n.stripe_client_fee){var s;r=Number(null===se||void 0===se||null===(s=se.options)||void 0===s?void 0:s.stripe_client_fee)}else if(null===se||void 0===se||null===(o=se.options)||void 0===o?void 0:o.stripe_fee_percentag){var a;d=Number(null===se||void 0===se||null===(a=se.options)||void 0===a?void 0:a.stripe_fee_percentage)*T/100}else d=0,r=0;gi(r+d)},Di=(null===re||void 0===re?void 0:re.offer_price)||0,zi=function(e,i,n,o,t){var l=0;return e&&i>=n?("percentage"===(null===t||void 0===t?void 0:t.discount_type)&&Xe<1&&(l=Number(null===t||void 0===t?void 0:t.offer_percentage).toFixed(0)+"%"),{discountPrice:"Delivery"===be?(0,h.NM)(e+o,si):(0,h.NM)(e,si),totalDiscount:l}):!!o&&{discountPrice:(0,h.NM)(o,si),totalDiscount:!1}};return(0,t.jsxs)(r.JX,{xs:"12",className:"p-0 wrapper-cart-total ".concat(F||"pt-3","  "),children:[(0,t.jsxs)(r.X2,{className:"m-0 mb-1 p-0",children:[O&&(0,t.jsx)(r.JX,{xs:"12",md:"12",className:"mb-2",children:(0,t.jsx)("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"#363636"},children:Oe.formatMessage({id:"yourorder"})})}),(0,t.jsx)("div",{className:"d-block d-md-none",children:z}),(0,t.jsx)(r.JX,{xs:"8",md:"7",style:{fontWeight:"500"},children:Oe.formatMessage({id:"total"})}),(0,t.jsx)(r.JX,{xs:"4",md:"5",className:"text-right ps-0 cart-total-price",children:(0,t.jsxs)("span",{style:{fontWeight:"500"},children:[ce," ","string"==typeof(0,a.F)(Y,ae)?(0,a.F)(Y,ae):(0,h.NM)((0,a.F)(Y,ae),si)]})})]}),ve?(0,t.jsxs)(t.Fragment,{children:[" ",G&&null!==G.percent&&0!==ci?(0,t.jsxs)(r.X2,{className:"m-0",children:[(0,t.jsx)(r.JX,{xs:"8",md:"7",style:{fontWeight:"500"},children:Oe.formatMessage({id:"tip"})}),(0,t.jsx)(r.JX,{xs:"4",md:"5",className:"text-right ps-0 cart-total-price",children:(0,t.jsxs)("span",{style:{fontWeight:"500"},children:[ce," ","empty"===(null===G||void 0===G?void 0:G.percent)?(0,h.NM)(G.Amount,si):(0,h.NM)(ci,si)]})})]}):null," "]}):null,Be&&null!=Se?(0,t.jsxs)(r.X2,{className:"m-0 mb-1",children:[(0,t.jsxs)(r.JX,{xs:"9",md:"9",style:{fontWeight:"500"},children:["AE"==(null===pe||void 0===pe?void 0:pe.country_code)?"VAT":Oe.formatMessage({id:"tax"})," ",R?(0,t.jsx)(r.$j,{size:"sm"}):bi&&(null===bi||void 0===bi?void 0:bi.length)||fe?"":"".concat(Se,"%"),(0,t.jsx)("div",{children:("cod"==te||!te)&&L&&(null===L||void 0===L?void 0:L.message)&&Number(null===L||void 0===L?void 0:L.minTax)<Number(null===ke||void 0===ke?void 0:ke.tax_percentage)?(0,t.jsxs)("div",{style:{color:null===ge||void 0===ge?void 0:ge.backgroundColor,fontSize:"0.85rem",fontWeight:"700"},className:"w-full ms-1",children:["*",null===L||void 0===L?void 0:L.message]}):null})]}),(0,t.jsx)(r.JX,{xs:"3",md:"3",className:"text-right ps-0 cart-total-price",children:(0,t.jsxs)("span",{style:{fontWeight:"500"},children:[ce," ",(0,h.NM)((0,a.F)(Be,ae),si)]})})]}):"",le?K&&"Delivery"==be?(0,t.jsxs)(r.X2,{className:"m-0 mb-1",children:[(0,t.jsxs)(r.JX,{xs:"8",md:"7",style:{fontWeight:"500"},children:[" ",Oe.formatMessage({id:"deliveryFee"})," "]}),(0,t.jsx)(r.JX,{xs:"4",md:"5",className:"text-right ps-0 cart-total-price",children:(0,t.jsxs)("span",{style:{fontWeight:"500"},children:[ce," ",(0,h.NM)((0,a.F)(K,ae),si)]})})]}):"":null,xi?(0,t.jsxs)(r.X2,{className:"m-0 mb-1",children:[(0,t.jsxs)(r.JX,{xs:"8",md:"7",style:{fontWeight:"500"},children:[" ",Oe.formatMessage({id:"stripeFee"})," "]}),(0,t.jsx)(r.JX,{xs:"4",md:"5",className:"text-right ps-0 cart-total-price",children:(0,t.jsxs)("span",{style:{fontWeight:"500"},children:[ce," ",(0,h.NM)((0,a.F)(xi,ae),si)]})})]}):"",yi&&"Delivery"==be?(0,t.jsxs)(r.X2,{className:"m-0 mb-1",children:[(0,t.jsxs)(r.JX,{xs:"8",md:"7",style:{fontWeight:"500"},children:[" ",Oe.formatMessage({id:"additional"})," ",Oe.formatMessage({id:"deliveryFee"})," "]}),(0,t.jsx)(r.JX,{xs:"4",md:"5",className:"text-right ps-0 cart-total-price",children:(0,t.jsxs)("span",{style:{fontWeight:"500"},children:[ce," ",(0,h.NM)((0,a.F)(yi,ae),si)]})})]}):"",$>0?(0,t.jsxs)(r.X2,{className:"m-0 mb-1",children:[(0,t.jsxs)(r.JX,{xs:"8",md:"7",style:{fontWeight:"500"},children:[" ","shopmart"==_e&&ye?Oe.formatMessage({id:"loyaltyDiscount"}):Oe.formatMessage({id:"loyaltyPoints"})," "]}),(0,t.jsxs)(r.JX,{xs:"4",md:"5",className:"text-right ps-0 cart-total-price",children:[" ",(0,t.jsxs)("span",{style:{fontWeight:"500"},children:[ce," ",(0,a.F)((0,h.NM)($,si),ae)]})," "]})]}):"",Q>0?(0,t.jsxs)(r.X2,{className:"m-0 mb-1",children:[(0,t.jsxs)(r.JX,{xs:"8",md:"7",style:{fontWeight:"500"},children:[" ",Oe.formatMessage({id:"paidThroughWallet"}),":"," "]}),(0,t.jsxs)(r.JX,{xs:"4",md:"5",className:"text-right ps-0 cart-total-price",children:[" ",(0,t.jsxs)("span",{style:{fontWeight:"500"},children:[ce," ",(0,a.F)((0,h.NM)(Q,si),ae)]})," "]})]}):"",Ze?(0,t.jsxs)(r.X2,{className:"m-0 mb-1",children:[(0,t.jsxs)(r.JX,{xs:"8",md:"7",style:{fontWeight:"500"},children:["".concat(null===Ze||void 0===Ze?void 0:Ze.d_vouch_name,"(").concat(null===Ze||void 0===Ze?void 0:Ze.voucher_name,")"),"percentage"==(null===Ze||void 0===Ze?void 0:Ze.voucher_type)?"".concat("1"==W?Number(null===Ze||void 0===Ze?void 0:Ze.amount).toFixed(2):"").concat("1"==W?"%":""):""]}),(0,t.jsxs)(r.JX,{xs:"4",md:"5",className:"text-right ps-0 cart-total-price",children:[" ",(0,t.jsxs)("span",{style:{fontWeight:"500"},children:["(",ce," "," "," ",U,")"]})," "]})]}):"",!De&&zi(Te,Y,Di,li,re)?(0,t.jsxs)(r.X2,{className:"m-0 mb-1 text-warning",children:[(0,t.jsx)(r.JX,{xs:"8",md:"7",children:(0,t.jsxs)("strong",{children:[Oe.formatMessage({id:"discount"}),(null===(u=zi(Te,Y,Di,li,re))||void 0===u?void 0:u.totalDiscount)?" (".concat(null===(N=zi(Te,Y,Di,li,re))||void 0===N?void 0:N.totalDiscount,")"):(0,t.jsx)(t.Fragment,{})]})}),(0,t.jsx)(r.JX,{xs:"4",md:"5",className:"text-right cart-total-price",children:(0,t.jsxs)("span",{style:{fontWeight:"500"},children:[ce,null===(M=zi(Te,Y,Di,li,re))||void 0===M?void 0:M.discountPrice]})})]}):(0,t.jsx)(t.Fragment,{}),(0,t.jsxs)(r.X2,{className:"m-0 mb-1 cart-total",children:[(0,t.jsxs)(r.JX,{xs:"8",md:"7",children:[Oe.formatMessage({id:"grandTotal"})," "]}),function(e,i,n,o,l,d,s,u,c){var v,m;m="Delivery"===e&&i>0||"Delivery"===e&&n>0?(0,a.F)((0,h.NM)(l+i-n+d+s,u),c):(0,a.F)((0,h.NM)(l+s+d,u),c);var p=null===(v=De&&zi(Te,Y,Di,n,re))||void 0===v?void 0:v.discountPrice;return m=p?Number(m)+Number(p):m,ze((0,_.H3)(m)),(0,t.jsx)(r.JX,{xs:"4",md:"5",className:"text-right ps-0 cart-total-price",children:(0,t.jsxs)("span",{children:[o," ",m]})})}(be,ni,li,ce,T,xi,ci,si,ae)]}),Me&&(null===se||void 0===se||null===(I=se.options)||void 0===I?void 0:I.merchant_loyalty_system)&&Ce?(0,t.jsxs)("div",{className:"rounded-5 mt-4 mb-2 d-flex justify-content-center align-items-center mx-2 loyalty-info",children:[Oe.formatMessage({id:"youWillEarn"}),(0,t.jsx)("span",{className:"",children:(0,t.jsx)(j(),{src:"/assets/images/loyalty.png",width:20,height:20,alt:"loyalty",className:"m-0 mx-1"})})," ",(0,t.jsx)("span",{className:"loyalty-point-number",children:Math.round(ee/Ce)})," ",Oe.formatMessage({id:"earnLoyalty"})]}):(0,t.jsx)(t.Fragment,{}),(0,t.jsx)(x,{subTotal:ee,discount:Te,disableItemwiseFreeDeliveryMsg:pi,isDeliveryFree:function(){return!(null===P||void 0===P?void 0:P.some((function(e){return"1"!==(null===e||void 0===e?void 0:e.free_delivery_item)})))},deliveryCharges:K,itemAdditionalDc:yi,tax:Be}),De&&zi(Te,Y,Di,li,re)?(0,t.jsx)("div",{className:"cart-discount-msg-wrapper text-center",children:(0,t.jsxs)("p",{children:[(0,t.jsx)(S.L9,{fill:null===ge||void 0===ge?void 0:ge.backgroundColor})," Yay! You saved ",ce," ",null===(D=zi(Te,Y,Di,li,re))||void 0===D?void 0:D.discountPrice]})}):(0,t.jsx)(t.Fragment,{})]})}},37165:function(e,i,n){var o=n(828),t=n(85893),l=n(67294),r=n(50450),d=n(41248),s=n(59441),a=n(27856),u=n.n(a),c=n(99691);i.Z=function(e){var i=e.checkOutNote,n=((0,s.rV)().setting,(0,d.v9)((function(e){return e.checkout.freeDeliveryMsg})),(0,o.Z)((0,l.useState)(""),2));return n[0],n[1],console.log("loading => checkOutNote",i),(0,t.jsx)(t.Fragment,{children:i?(0,t.jsxs)(r.bZ,{color:"info",className:"p-2 my-2 fs-08",children:[(0,t.jsx)("span",{className:"fw-bold",children:"Note: "}),(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:u().sanitize((0,c.eB)(i,250))}})]}):(0,t.jsx)(t.Fragment,{})})}},54848:function(e,i,n){var o=n(828),t=n(85893),l=n(11163),r=n(67294),d=n(35005),s=n(67017),a=n(41248),u=n(68780);i.Z=function(e){var i,n,c,v,m,p,h,f,x,g,_=e.handleClick,y=e.showErrorPopup,N=e.errorDetails,j=e.setOrderAfterError,b=e.setShowErrorPopup,k=(0,l.useRouter)(),w=(0,u.Z)().goToPrevPageFromCheckoutPage;console.log("loading => errorDetails",null===N||void 0===N||null===(i=N.details)||void 0===i||null===(n=i.cart)||void 0===n?void 0:n.length);var S=(0,o.Z)((0,r.useState)("/"),2),C=S[0],M=S[1],I=(0,a.v9)((function(e){return e.settings.selectedLanguage})),D=(0,a.v9)((function(e){return e.checkout.checkoutViewPage})),z=(0,r.useMemo)((function(){var e,i;return function(e,i){var n,o,t=null===N||void 0===N||null===(n=N.details)||void 0===n||null===(o=n.cart)||void 0===o?void 0:o.filter((function(n){return!e.some((function(e){return e.size_id==n.size_id&&e.item_id==n.item_id}))&&!i.some((function(e){return e.item_id==e.item_id}))}));return!!(t&&t.length>0)&&t}((null===N||void 0===N||null===(e=N.details)||void 0===e?void 0:e.out_of_stock_item_size)||[],(null===N||void 0===N||null===(i=N.details)||void 0===i?void 0:i.outOfStockItems)||[])}),[N]);return(0,r.useEffect)((function(){localStorage.getItem("slug")?M("/menu-"+localStorage.getItem("slug")):M("/")}),[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s.Z,{show:y,centered:!0,children:(0,t.jsxs)(s.Z.Body,{className:"p-4",children:[(0,t.jsx)("h1",{className:"mb-4",style:{fontSize:"28px"},children:(0,t.jsx)("b",{children:null===N||void 0===N?void 0:N.msg})}),(null===N||void 0===N||null===(c=N.details)||void 0===c?void 0:c.outOfStockItems)&&(null===N||void 0===N||null===(v=N.details)||void 0===v||null===(m=v.outOfStockItems)||void 0===m?void 0:m.length)?(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"mt-2",children:"These items are out of stock."}),null===N||void 0===N||null===(p=N.details)||void 0===p?void 0:p.outOfStockItems.map((function(e,i){return(0,t.jsxs)("p",{children:[i+1,". ",e.item_name," ",(0,t.jsx)("span",{className:"text-danger",children:"(".concat(e.msg,")")})]})}))]}):(0,t.jsx)(t.Fragment,{}),(null===N||void 0===N||null===(h=N.details)||void 0===h?void 0:h.out_of_stock_item_size)&&(null===N||void 0===N||null===(f=N.details)||void 0===f||null===(x=f.out_of_stock_item_size)||void 0===x?void 0:x.length)?(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"mt-2",children:"These sizes are out of stock."}),null===N||void 0===N||null===(g=N.details)||void 0===g?void 0:g.out_of_stock_item_size.map((function(e,i){var n,o;return(0,t.jsx)("p",{children:(null===N||void 0===N||null===(n=N.details)||void 0===n||null===(o=n.out_of_stock_item_size)||void 0===o?void 0:o.length)?"".concat(i+1,". ").concat(e.size_name):""})}))]}):(0,t.jsx)(t.Fragment,{}),z.length>0?(0,t.jsx)("p",{children:"Would you like to place the order without these items?"}):(0,t.jsx)("p",{children:"Would you like to continue shopping?"}),(0,t.jsxs)("div",{className:"d-flex justify-content-center gap-2 mt-4",children:[(0,t.jsx)(d.Z,{variant:"danger",className:"mx-1",onClick:function(){return b(!1)},children:"Cancel"}),(0,t.jsx)(d.Z,{variant:"success",className:"border-0",onClick:function(e){(null===z||void 0===z?void 0:z.length)?(_(e,{},z),j(!0),b(!1)):(D?w():k.push(C,void 0,{locale:I}),b(!1))},children:z.length>0?"Order Now":"Go Back"})]})]})})})}},7606:function(e,i,n){var o=n(85893),t=n(67294),l=n(50450),r=n(89583),d=n(41248);i.Z=function(e){var i=e.isOpen,n=e.toggle,s=e.onConfirm,a=e.message,u=e.previousOrderId,c=e.baseUrl,v=e.setLoading,m=e.loading,p=e.pageQuick,h=e.set_checkout_loading,f=void 0!==h&&h,x=e.checkout_loading,g=void 0!==x&&x,_=e.order,y=(0,d.v9)((function(e){var i;return null===(i=e.settings.staticSettings)||void 0===i?void 0:i.theme})),N=u?c+"/receipt?id=":null,j=function(){v(!1),n()};return(0,t.useEffect)((function(){p?f(!1):v(!1)})),(0,o.jsxs)(l.u_,{isOpen:i,toggle:j,centered:!0,fade:!0,className:"custom-modal",children:[(0,o.jsx)(l.xB,{toggle:j,className:"border-0 text-center pb-0",children:(0,o.jsxs)("div",{className:"text-center d-flex align-items-center justify-content-center",children:[(0,o.jsx)(r.gJy,{className:"fs-4 text-warning"}),(0,o.jsx)("span",{className:"fw-bold text-dark mx-2",children:"Order Approval Needed"})]})}),(0,o.jsxs)(l.fe,{className:"text-center px-3 pb-0",children:[(0,o.jsx)("p",{className:"text-muted small",children:a||"Your order limit has been reached. Would you like to retry placing your order?"}),u&&(0,o.jsxs)("div",{className:"alert alert-light border mt-3",children:[(0,o.jsx)("strong",{className:"text-dark small",children:"Previous Order ID:"}),(0,o.jsx)("span",{className:"text-primary small ms-1",children:u}),(0,o.jsx)("br",{}),N&&(0,o.jsxs)("a",{href:N+=u,target:"_blank",rel:"noopener noreferrer",className:"d-block small mt-2 text-decoration-none text-primary fw-bold",children:[(0,o.jsx)(r.$aT,{className:"me-1"})," View Receipt"]})]}),(0,o.jsx)("span",{className:"fw-bold text-danger small",children:"Please confirm to proceed."})]}),(0,o.jsxs)(l.mz,{className:"border-0 d-flex justify-content-center gap-2 pt-0 pb-3",children:[(0,o.jsxs)(l.zx,{style:{backgroundColor:null===y||void 0===y?void 0:y.backgroundColor},size:"sm",className:"px-3 border-0 rounded d-flex justify-content-center align-items-center",disabled:p?g:m,onClick:function(e){var i;v(!0);var o={OrderRetryApproval:!0,grandTotal:(null===_||void 0===_?void 0:_.grandTotal)?_.grandTotal:0};_&&(null===(i=JSON.parse(null===_||void 0===_?void 0:_.cart))||void 0===i?void 0:i.length)>0?s(e,o,JSON.parse(null===_||void 0===_?void 0:_.cart),null===_||void 0===_?void 0:_.payment_opt):s(e,o),n()},children:[(0,o.jsx)(r.FJM,{className:"me-1"}),"Confirm"]}),(0,o.jsx)(l.zx,{color:"secondary",size:"sm",className:"px-3 rounded text-center",onClick:function(){v(!1),n()},children:"Cancel"})]})]})}},11588:function(e,i,n){var o=n(85893),t=n(67294),l=n(6158);i.Z=function(e){var i=e.order_no,n=(0,l.SV)();return(0,t.useEffect)((function(){i&&(window.location="".concat(n,"/swich-pay/get-token/").concat(i))}),[i]),(0,o.jsx)(o.Fragment,{})}},57107:function(e,i,n){n.d(i,{Z:function(){return g}});var o=n(828),t=n(85893),l=n(67294),r=n(50450),d=n(25374),s=n(47568),a=n(70655),u=n(6158),c=n(11163),v=n(56675),m=n(77561),p=n(41248),h=n(60339),f=function(e){var i=e.order_id,n=e.loading,r=e.setLoading,f=e.toggle,x=(0,p.I0)(),g=(0,u.SV)(),_=(0,c.useRouter)(),y=(0,o.Z)((0,l.useState)(!1),2),N=y[0],j=y[1],b=(0,o.Z)((0,l.useState)(null),2),k=b[0],w=b[1],S=(0,o.Z)((0,l.useState)(null),2),C=S[0],M=S[1],I=(0,o.Z)((0,l.useState)(null),2),D=I[0],z=I[1],O=(0,o.Z)((0,l.useState)({}),2),F=O[0],Z=O[1],P=(0,o.Z)((0,l.useState)(null),2),X=P[0],q=P[1],J=(0,o.Z)((0,l.useState)(!1),2),T=J[0],E=J[1];(0,l.useEffect)((function(){j(!0)}),[]),(0,l.useEffect)((function(){N&&A()}),[N]);var A=function(){var e=(0,s.Z)((function(){var e,n,o,t,l;return(0,a.__generator)(this,(function(d){switch(d.label){case 0:r(!0),e={json:"1"},d.label=1;case 1:return d.trys.push([1,3,,4]),[4,(0,m.P)("GET",g,"/xpay/intend/".concat(i),null,e)];case 2:return o=d.sent(),(t=null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.data)&&(null===t||void 0===t?void 0:t.encryptionKey)&&(null===t||void 0===t?void 0:t.pi_client_secret)?(M(null===t||void 0===t?void 0:t.pi_client_secret),z(null===t||void 0===t?void 0:t.encryptionKey),Z(null===t||void 0===t?void 0:t.customer),q(t),r(!1)):(r(!1),w({success:!1,message:"Something went wrong"})),[3,4];case 3:return l=d.sent(),console.log("loading => axios paymentIntent error",l),r(!1),w({success:!1,message:"Something went wrong"}),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if(!N)return(0,t.jsx)("p",{className:"text-center text-gray-500",children:"Loading payment gateway..."});var W=(0,d.lx)(),R=function(){var e=(0,s.Z)((function(){var e,n,o;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:w(null),t.label=1;case 1:return t.trys.push([1,6,7,8]),C&&D&&F?(r(!0),T||r(!1),[4,W.confirmPayment("card",C,F,D)]):[3,4];case 2:return e=t.sent(),n=e.error,e.message,[4,(0,v.mO)(g,i)];case 3:return t.sent()||r(!1),n?(r(!1),console.error("Payment Error:",n),setTimeout((function(){f()}),3e3)):(localStorage.removeItem("indoljCartObj"),x((0,h.ZW)([])),r(!1)),[3,5];case 4:r(!1),setTimeout((function(){f()}),3e3),t.label=5;case 5:return[3,8];case 6:return o=t.sent(),r(!1),console.error("Unexpected Error:",o),[3,8];case 7:return r(!1),_.push("/receipt?id=".concat(i)),setTimeout((function(){f()}),3e3),[7];case 8:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,t.jsxs)("div",{style:{boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)",padding:"20px 20px 20px 20px",minWidth:"300px",width:"500px",borderRadius:"8px",backgroundColor:"white"},children:[(0,t.jsx)("h1",{style:{textAlign:"center",fontWeight:"900",marginBottom:"20px",color:"#53C0C8"},children:"XPay"}),(0,t.jsx)(d.Hn,{options:{override:!0,fields:{creditCard:{required:!0,placeholder:"Xxxx xxXx xXxx xxxX",label:"Enter your credit card"},exp:{required:!0,placeholder:"Exp. Date"}},style:{".input":{border:"1px solid #000","border-radius":"15px",padding:"12px","font-size":"16px","font-weight":"900",transition:"border-color 0.3s ease, box-shadow 0.3s ease"},":focus":{"border-color":"#53C0C8","box-shadow":"0 0 8px rgba(83, 192, 200, 0.6)"},":hover":{"border-color":"#53C0C8"},".invalid":{"border-color":"red"},".label":{"font-size":"18px","font-weight":"900",color:"#333"},"::selection":{"background-color":"#53C0C8",color:"#fff"}}},onReady:function(e){E(null===e||void 0===e?void 0:e.ready)}}),k&&(0,t.jsx)("p",{style:{marginTop:"5px",padding:"5px",textAlign:"center",fontWeight:"500",borderRadius:"5px",color:k.success?"green":"red",backgroundColor:"lightgray"},children:k.message}),(0,t.jsxs)("button",{style:{width:"100%",marginTop:"5px",backgroundColor:"#53C0C8",fontSize:"18px",color:"white",fontWeight:"900",padding:"10px",border:"none",borderRadius:"5px",cursor:"pointer",transition:"background 0.2s"},onClick:R,disabled:n,onMouseOver:function(e){return e.target.style.background="#40A7B0"},onMouseOut:function(e){return e.target.style.background="#53C0C8"},children:[n?"Processing...":"Pay Now"," (",X&&(null===X||void 0===X?void 0:X.currency)?null===X||void 0===X?void 0:X.currency:""," ",X&&(null===X||void 0===X?void 0:X.amount)?null===X||void 0===X?void 0:X.amount:"",")"]})]})})})},x=n(59441),g=function(e){var i=e.isOpen,n=e.toggle,s=e.order_no,a=(0,x.rV)().xpay_credentials,u=(0,o.Z)((0,l.useState)(!1),2),c=u[0],v=u[1],m=null===a||void 0===a?void 0:a.xpay_api_hmac_secret,p=null===a||void 0===a?void 0:a.xpay_store_id,h=null===a||void 0===a?void 0:a.xpay_public_key;return(0,t.jsx)(d.Tc,{xpay:{publishableKey:h,accountId:p,hmacSecret:m},children:(0,t.jsxs)(r.u_,{isOpen:i,centered:!0,children:[(0,t.jsx)(r.xB,{toggle:c?null:n}),(0,t.jsx)(r.fe,{children:(0,t.jsx)(f,{order_id:s,setLoading:v,loading:c,toggle:n})})]})})}},38771:function(e,i,n){var o=n(85893),t=(n(67294),n(50450)),l=(n(84494),n(41248)),r=n(99691),d=n(94803),s=n.n(d),a=n(15471),u=n(68780);i.Z=function(e){var i=e.handleClick,n=(e.setPreorder,(0,u.Z)().goToCheckoutPage,function(){v((0,a.wK)(!1))}),d=(0,l.v9)((function(e){return e.settings.staticSettings.theme})),c=((0,l.v9)((function(e){return e.menu.areaPreOrder})),(0,l.v9)((function(e){return e.checkout.confirmBulkCheckoutModal}))),v=(0,l.I0)();return(0,o.jsxs)(t.u_,{isOpen:c,toggle:n,centered:!0,fade:!0,className:"custom-modal cart-remove-item-modal",children:[(0,o.jsx)(t.xB,{toggle:n,className:"border-0 text-center pb-0 ",children:(0,o.jsx)("div",{className:"text-center d-flex align-items-center",children:(0,o.jsx)("h6",{className:"fw-bold text-dark mx-2",children:"PRE-ORDER"})})}),(0,o.jsx)(t.fe,{className:"text-center px-3 pb-0",children:(0,o.jsxs)("div",{className:"perOrder-msg",children:[(0,o.jsx)("h5",{className:"mb-0",children:"THIS IS A PRE-ORDER"}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{className:"mb-0",children:[(0,o.jsxs)("sub",{children:["DELIVERY DATE: ",(0,o.jsx)("b",{children:(0,o.jsx)(s(),{format:"LL",children:(0,r.Mf)("customDeliveryDateTime")})})]})," "]}),(0,o.jsxs)("p",{className:"mb-0",children:[(0,o.jsxs)("sub",{children:["DELIVERY TIME: ",(0,o.jsx)("b",{children:(0,o.jsx)(s(),{format:"hh:mm A",children:(0,r.Mf)("customDeliveryDateTime")})})]})," "]})]})]})}),(0,o.jsx)(t.mz,{className:"border-0 d-flex justify-content-center gap-2 pt-0 pb-3",children:(0,o.jsx)(t.zx,{style:{backgroundColor:null===d||void 0===d?void 0:d.backgroundColor},size:"sm",className:"px-3 border-0 rounded text-center d-flex justify-content-center align-items-center",onClick:function(e){v((0,a.wK)(!1)),i(e,{},null)},children:"Confirm Pre-Order"})})]})}},99615:function(e,i,n){n.d(i,{P:function(){return d}});var o=n(22920),t=n(6158),l=n(40013),r=t.ZP.currencyUnit,d=function(e,i,n,t,d){var s,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];if(!e.length)return o.Am.error("Cart should not be empty!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"colored"}),t&&t(!1),!1;if("Drive-in"===localStorage.getItem("delivery_type")||"Dinein"===localStorage.getItem("delivery_type"))return!0;var c=0,v=null===(s=JSON.parse(l.tO.getData("area")))||void 0===s?void 0:s.minimum,m=localStorage.getItem("minOrder"),p=localStorage.getItem("min_for_order_pickup"),h=a||localStorage.getItem("delivery_type"),f="1"===i&&"Delivery"==h&&Number(v)?Number(v):Number(m),x="Pickup"==h&&Number(p)?Number(p):null;return null===e||void 0===e||e.forEach((function(e){var i,n="string"==typeof e.price?Number(null===e||void 0===e||null===(i=e.price)||void 0===i?void 0:i.split("|")[0]):Number(null===e||void 0===e?void 0:e.price);c+=e.qty*(isNaN(e.displayPrice)?0:n||e.displayPrice)})),c=n&&c?Math.min(n,c):n||c,console.log("loading => min order",n,f),!h||!u.includes(h)||("Delivery"===h&&(n>=f||!f)||"Pickup"===h&&(n>=x||!x)||(!("Delivery"==h&&f||"Pickup"==h&&x)||(o.Am.error("Minimum order value is ".concat(d||r," ").concat("Delivery"==h?f:"Pickup"==h?x:null),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"colored"}),t&&t(!1),!1)))}}}]);