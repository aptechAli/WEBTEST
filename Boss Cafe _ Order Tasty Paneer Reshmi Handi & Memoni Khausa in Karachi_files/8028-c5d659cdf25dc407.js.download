"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8028],{60289:function(e,n,o){var i=o(828),t=o(85893),l=o(67294),a=o(37054),r=o(50450),s=o(41248),d=(o(59441),o(73455)),c=["places"];n.Z=function(e){var n=e.hideButton,o=(0,i.Z)((0,l.useState)(!1),2),u=o[0],v=o[1],m=(0,l.useRef)(null),p=(0,l.useRef)(null),h=(0,s.v9)((function(e){return e.settings.selectedCoords})),g=(0,s.v9)((function(e){return e.settings.showGoogleMapModal})),f=(0,s.v9)((function(e){var n;return null===(n=e.settings.staticSettings)||void 0===n?void 0:n.setting})),_=(0,s.I0)(),x=(0,a.Db)({googleMapsApiKey:null===f||void 0===f?void 0:f.main_screen_google_map_api_key,libraries:c}).isLoaded,y=function(e){n||_((0,d.aE)(!g))};return(0,l.useEffect)((function(){return function(){if(p.current&&window.google&&window.google.maps&&window.google.maps.event)try{window.google.maps.event.removeListener(p.current)}catch(e){console.warn("Error removing Google Maps listener:",e)}}}),[]),x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.b6,{mapContainerStyle:{width:"100%",height:"100px"},center:h,zoom:16,options:{disableDefaultUI:!0,draggable:!1,zoomControl:!1,scrollwheel:!1,clickableIcons:!1},onLoad:function(e){m.current=e,window.google&&window.google.maps&&window.google.maps.event&&(p.current=e.addListener("click",y)),setTimeout((function(){v(!0)}),100)},children:h&&u&&(0,t.jsx)(a.Jx,{position:{lat:h.lat,lng:h.lng}})}),n?(0,t.jsx)(t.Fragment,{}):(0,t.jsx)("div",{className:"d-flex justify-content-end",children:(0,t.jsx)("label",{className:"text-primary text-right pointer text-decoration-underline ml-auto",onClick:function(){_((0,d.aE)(!g))},children:"Change Location on Map"})})]}):(0,t.jsx)("div",{className:"mt-4 w-100 mx-auto d-flex justify-content-center p-4",children:(0,t.jsx)(r.$j,{color:"danger",size:"md",type:"border",style:{height:"4rem",width:"4rem"},children:"Loading..."})})}},76289:function(e,n,o){o.d(n,{Zh:function(){return u},dh:function(){return r},kB:function(){return v}});var i=o(47568),t=o(26042),l=o(70655),a=(o(80129),o(17117),o(77561),o(56675)),r=(o(40013),function(){var e=(0,i.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,a.MU)()];case 1:return[2,e.sent()]}}))}));return function(){return e.apply(this,arguments)}}()),s={urbanity:"urban",rushHour:null,circuityOverride:null,modeHints:null};function d(e){return e*Math.PI/180}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,n=e.getHours();return n>=7&&n<10||n>=17&&n<20}var u=function(e){var n,o=e.riderLat,i=e.riderLng,l=e.userLat,a=e.userLng,r=e.config,u=void 0===r?{}:r,v=(0,t.Z)({},s,u),p=function(e,n,o,i){var t=d(o-e),l=d(i-n),a=Math.pow(Math.sin(t/2),2)+Math.cos(d(e))*Math.cos(d(o))*Math.pow(Math.sin(l/2),2);return 12742.0176*Math.asin(Math.sqrt(a))}(o,i,l,a),h=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.urbanity,i=void 0===o?"urban":o,t=n.rushHour,l=void 0===t?null:t,a=n.modeHints,r=void 0===a?null:a,s=null!==l&&void 0!==l?l:c();if(null===r||void 0===r?void 0:r.walk)return 5.5;if(null===r||void 0===r?void 0:r.bike)return 15;if(null===r||void 0===r?void 0:r.scooter)return 25;if(e<=1)return 5.5;if(e<=5)return 15;if(e<=15)return 23;var d,u={urban:s?30:42,suburban:s?38:50,rural:s?48:65},v=null!==(d=u[i])&&void 0!==d?d:u.urban;return e>50&&(v=Math.max(v,70)),e>120&&(v=Math.max(v,85)),v}(p,v),g=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.urbanity,i=void 0===o?"urban":o,t=n.rushHour,l=void 0===t?null:t,a=n.circuityOverride,r=void 0===a?null:a;if(r)return r;var s,d,u=null!==l&&void 0!==l?l:c();if(e<2)s=null!==(d={urban:1.3,suburban:1.22,rural:1.15}[i])&&void 0!==d?d:1.3;else if(e<10){var v;s=null!==(v={urban:1.25,suburban:1.18,rural:1.12}[i])&&void 0!==v?v:1.25}else if(e<40){var m;s=null!==(m={urban:1.2,suburban:1.15,rural:1.1}[i])&&void 0!==m?m:1.2}else{var p;s=null!==(p={urban:1.15,suburban:1.12,rural:1.07}[i])&&void 0!==p?p:1.15}return u&&(s+=.03),s}(p,v),f=p*g,_=60*(f/Math.max(h,1e-6));return{straightDistanceKm:m(p,2),roadDistanceKm:m(f,2),assumedSpeedKmh:m(h,1),etaMinutes:m(_,1),details:{urbanity:v.urbanity,rushHour:null!==(n=v.rushHour)&&void 0!==n?n:c(),circuity:m(g,2)}}},v=function(e){var n,o=Math.max(null!==(n=null===e||void 0===e?void 0:e.etaMinutes)&&void 0!==n?n:0,0);if(o<1)return"< 1 min";if(o<60)return"".concat(Math.round(o)," min");var i=Math.floor(o/60),t=Math.round(o-60*i);return"".concat(i,"h ").concat(t,"m")};function m(e,n){var o=Math.pow(10,n);return Math.round(e*o)/o}},38028:function(e,n,o){o.d(n,{Z:function(){return he}});var i=o(47568),t=o(828),l=o(70655),a=o(85893),r=o(67294),s=o(67814),d=o(93024),c=(o(26042),o(51436)),u=o(50450),v=o(46299),m=o(99691),p=o(70893),h=o(11163),g=o(25675),f=o.n(g),_=(o(41664),o(86896)),x=o(41248),y=o(23249),j=o(18650),N=o(40013);o(82668),o(73135);o(8842),o(68780);var b=o(17117),w=o(77561),k=o(22920),S=o(60339),I=o(56675),M=o(72066),C=o(80129);function P(e){var n="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===n.length)return n.pop().split(";").shift()}var Z=function(){var e=(0,_.Z)(),n=(0,x.I0)(),o=function(){var o=(0,i.Z)((function(o,i,t,a,r,s,d){var c,u,v,m,p,h,g,f,_,x,y,j,Z,O,A,L,E,T,F,D,R,G;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return i(!0),c={json:"1"},o.json="1",[4,(0,b.LM)(o)];case 1:if(u=t.sent(),v=u.sh,u.SortedArray,console.log("loading => sh result",v),!v)return[3,5];o.SS_HASH=v,t.label=2;case 2:return t.trys.push([2,4,,5]),[4,(0,w.P)("POST",r,"placeorder",C.stringify(o),c,{},s)];case 3:return m=t.sent(),console.log("loading => axios placeorder success yyy",m),m&&1===m.code?(localStorage.removeItem("orderDetailsSnapshot"),f=null===(g={resp:m})||void 0===g||null===(p=g.resp)||void 0===p||null===(h=p.details)||void 0===h?void 0:h.order_info,_=f.order_id_hex,x=f.total_w_tax,y=f.status,j=f.order_id,k.Am.success(e.formatMessage({id:"orderPlacedSuccessMsg"}),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"colored"}),Z=N.tO.get(),(O=null===Z||void 0===Z?void 0:Z.items)&&(A=localStorage.getItem("order-history-".concat(a)),(L=A?JSON.parse(A):{})[_]={order_id:j,orderId:_,timestamp:new Date,status:y,total:x,cart:null===O||void 0===O?void 0:O.items},localStorage.setItem("order-history-".concat(a),JSON.stringify(L)),E=N.tO.get(),O=null===E||void 0===E?void 0:E.items,localStorage.setItem("cartHistory",JSON.stringify(O))),localStorage.removeItem("indoljCartObj"),localStorage.removeItem("setfreeDeliveryByItems"),n((0,S.ZW)([])),n((0,S.sx)(!1)),localStorage.setItem("hasOrdered",1),_,"&_suj_time=".concat(P("_suj_time"),"&_suid_hash=").concat(P("_suid_hash")),T="".concat(window.origin,"/receipt"),F={id:_},(0,M.QF)()&&(F.slug=(0,M.QF)()),D=new URLSearchParams(F).toString(),T=D?"".concat(T,"?").concat(D):T,window.location.href=T,i(!1)):(console.count(),i(!1),null===(R=(null===m||void 0===m?void 0:m.msg)?null===m||void 0===m?void 0:m.msg:"Something went wrong!")||void 0===R||R.replace(/Array|(\n)$/g,""),(0,I.kY)(r,d,o,m,R).then((function(e){console.log("loading => errorLogsResponse",e)})),k.Am.error(R,{position:"bottom-center",toastClassName:"toast",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"dark"})),[3,5];case 4:return G=t.sent(),console.log("loading => axios placeorder error",G),i(!1),"ECONNABORTED"===G.code?((0,I.kY)(r,d,o,G,"slow or late or no response").then((function(e){console.log("loading => errorLogsResponse",e)})),k.Am.error(e.formatMessage({id:"connectivityIssue"}),{position:"bottom-center",toastClassName:"toast",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"dark"})):(console.log("error: ",G),(0,I.kY)(r,d,o,G,"internal server error 500").then((function(e){console.log("loading => errorLogsResponse",e)})),i(!1),k.Am.error(e.formatMessage({id:"somethingWentWrong"}),{position:"bottom-center",toastClassName:"toast",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"dark"})),[3,5];case 5:return[2]}}))}));return function(e,n,i,t,l,a,r){return o.apply(this,arguments)}}();return{handlePlaceHolderApi:o}},O=o(76289),A=(o(80129),o(18036)),L=o(78959),E=o(73455),T=o(60289);var F=o(30381),D=o.n(F),R=o(6158),G=o(79229),z=(R.ZP.currencyUnit,function(e,n,o,i){var t,l,a=0!=(null===n||void 0===n?void 0:n.currency_options.admin_decimal_place)?Number(null===n||void 0===n?void 0:n.currency_options.admin_decimal_place):0;return"1"===(null===n||void 0===n||null===(t=n.currency_options)||void 0===t?void 0:t.admin_round_off_amount)?"".concat(o," ").concat(Math.round(e).toFixed(a)):"".concat(o," ").concat(null===(l=Number(e))||void 0===l?void 0:l.toFixed(a))}),H=function(e){var n=e.merchantName;return(0,a.jsx)("div",{className:"container footer-receipt",children:(0,a.jsxs)("div",{className:"row py-3",children:[(0,a.jsx)("div",{className:"col-md-4 d-flex align-items-center",children:(0,a.jsxs)("p",{style:{fontWeight:"500"},className:"ps-3 fs-08 mb-0",children:["\xa9 ",(new Date).getFullYear()," ",null!==n&&void 0!==n?n:"",". All Right Reserved."]})}),(0,a.jsxs)("div",{className:"col-md-4 d-flex flex-row justify-content-center",children:[(0,a.jsx)("p",{className:"py-1 px-1 mb-0",children:"Powered by "}),(0,a.jsx)("p",{className:"px-2 fw-bold fs-5 mb-0",style:{borderLeft:"1px solid black"},children:(0,a.jsx)("a",{href:"https://indolj.pk/",target:"_blank",children:"indolj"})})]})]})})},U=o(88446),J=o(51019),B=o(67446),q=o(66680),K=(o(1653),o(20061)),W=o(5434);var X=function(e){var n=e.modal,o=e.setModal,i=e.msg,t=e.type,l=e.foregroundColor,r=e.address,s=e.merchantId,d=(0,x.I0)(),c=function(){o(!n)};return"221133"==s&&"location"===t?null:(0,a.jsxs)(u.u_,{isOpen:n,toggle:c,centered:!0,backdrop:"static",size:"md",children:[(0,a.jsxs)(u.fe,{className:"pt-4 ",children:[(0,a.jsxs)("div",{className:"d-flex  align-items-center ".concat("location"===t?"justify-content-around":""),children:[(0,a.jsx)("p",{className:"m-0 p-0",style:{fontSize:"60px",color:l},children:"location"===t?(0,a.jsx)(W.vcr,{}):null}),(0,a.jsxs)("p",{className:"m-0 p-0",style:{fontSize:"18px"},children:[(0,a.jsx)("span",{children:i.line1})," ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:i.line2})]})]}),(0,a.jsx)("div",{children:r?(0,a.jsx)(T.Z,{hideButton:!0}):(0,a.jsx)(a.Fragment,{})})]}),(0,a.jsx)(u.mz,{className:"pt-0 border-none",style:{border:"none"},children:(0,a.jsxs)("div",{className:"notification_menu_modal d-flex w-100",style:{gap:"10px"},children:[(0,a.jsx)(u.zx,{className:"maybe_later",color:"ghost",onClick:c,children:"Not Now"}),(0,a.jsx)(u.zx,{className:"sounds_great",onClick:function(){"notification"===t?(d((0,L.G)(!0)),c()):"location"===t&&(d((0,E.aE)(!0)),c())},children:"Allow"})]})})]})},V=o(15471);var Y=function(e){var n=e.image,o=e.externalLink,i=(0,t.Z)((0,r.useState)(!0),2),l=i[0],d=i[1],v=function(){return d(!l)};return(0,a.jsx)("div",{children:(0,a.jsxs)(u.u_,{isOpen:l,centered:!0,children:[(0,a.jsx)("div",{onClick:v,className:"floating-close-right",children:(0,a.jsx)(s.G,{icon:c.NBC,size:"2x"})}),(0,a.jsx)(u.fe,{className:"p-0",toggle:v,children:(0,a.jsx)("a",{href:o||"javascript:void(0)",children:(0,a.jsx)("div",{className:"next_image_parent position-relative",style:{height:"700px"},children:(0,a.jsx)(f(),{toggle:v,onClick:function(e){return d(!1)},className:"w-100 pointer",src:"".concat(n),fill:!0})})})})]})})},Q=o(22827);var $=o(31647),ee=o(29408),ne=o(56351),oe=o(90033),ie=o(36305),te=function(e){var n,o=e.liveStatus,i=e.showTryAgainButton,l=e.merchantId,g=e.branchId,j=e.orderHex,b=e.riderInfo,w=e.riderStatus,k=e.orderId,S=(e.setshowLoader,e.pandagoTrackingUrl),I=e.transType,M=e.branchDetails,C=e.google_map_api_key,P=(e.harlyy_feedback_url,e.branch_id,(0,p.xQ)()),L=P.baseUrl,E=P.apiUrl,T=(0,_.Z)(),F=(0,h.useRouter)().query.easypaisa_miniapp,D=(0,t.Z)((0,r.useState)((0,m.AK)("payment_list")||[]),2),R=D[0],G=D[1],z=(0,t.Z)((0,r.useState)(!1),2),H=z[0],U=z[1],J=(0,t.Z)((0,r.useState)(""),2),B=J[0],q=J[1],K=(0,t.Z)((0,r.useState)(null),2),W=K[0],X=K[1],V=(0,t.Z)((0,r.useState)(null),2),Y=V[0],Q=V[1],$=((0,x.v9)((function(e){return e.checkout})).receiptViewPage,(0,x.v9)((function(e){return e.settings}))),ee=$.authToken,ne=$.isEasypaisa,oe=E+"placeorder?json=1",ie=L+"/receipt?id=",te=(0,m.Mf)("delivery_type"),le="undefined"!==typeof localStorage&&N.tO.getSnapShot(),ae=Object.keys(R).some((function(e){return"cod"==e})),re=Z().handlePlaceHolderApi,se={initial_order:{title:"Payment Under Review...",color:"warning"},auto_cancelled_payment_failed:{title:"Payment Failed",color:"danger"},pending:{title:T.formatMessage({id:"received"}),color:"warning"},cancelled:{title:"Cancelled",color:"danger"}};return(0,r.useEffect)((function(){if((!R||!R.length)&&E&&l&&g){var e=localStorage.getItem("authToken"),n=new URL(E+"GetEnabledPayments");n.searchParams.append("merchant_id",l),n.searchParams.append("branch_id",g),n.searchParams.append("json","1"),n.searchParams.append("trans_type",te),v.Z.get(n,{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var n,o,i,t=e.data;(null===t||void 0===t||null===(n=t.details)||void 0===n?void 0:n.payment_list)&&(G(null===(o=t.details)||void 0===o?void 0:o.payment_list),localStorage.setItem("payment_list",JSON.stringify(null===(i=t.details)||void 0===i?void 0:i.payment_list)))}))}}),[E,l,g]),(0,r.useEffect)((function(){b&&X(b)}),[b]),(0,a.jsxs)(a.Fragment,{children:[H?(0,a.jsx)(y.Z,{}):(0,a.jsx)(a.Fragment,{}),(0,a.jsxs)("div",{className:"thank-you-order-section",children:[(0,a.jsxs)("div",{className:"thank-you-card",children:[(0,a.jsx)("h2",{children:"initial_order"===o?T.formatMessage({id:"paymentFailed"}):"auto_cancelled_payment_failed"!==o||ne?"cancelled"==o?"Sorry":"Thank You!":T.formatMessage({id:"paymentFailedOnline"})}),(0,a.jsx)("p",{children:"initial_order"===o?"Your order has been Under Process":"auto_cancelled_payment_failed"!==o||ne?"cancelled"==o?"Your order has been cancelled":"Your order has been placed successfully":"Your order has been cancelled due to payment failure"})]}),(0,a.jsxs)("div",{className:"order-info",children:[(0,a.jsxs)("div",{className:"order-details",children:[(0,a.jsxs)("span",{className:"order-text",children:[(0,a.jsx)("span",{className:"order-label",children:"Order No:"}),(0,a.jsx)("span",{className:"order-number",children:j})]}),(0,a.jsxs)("div",{className:"status-container",children:[(0,a.jsx)("span",{className:"status-label",children:"Status:"}),o?o in se?(0,a.jsx)(u.Ct,{className:"ms-2",color:se[o].color,children:se[o].title}):"accepted"===o.toLowerCase()?(0,a.jsx)(u.Ct,{className:"ms-2",color:"success",children:T.formatMessage({id:"accepted"})}):(0,a.jsx)(u.Ct,{className:"ms-2",color:"warning",children:o}):o?(0,a.jsx)(u.Ct,{className:"ms-2",color:null===(n=se[o])||void 0===n?void 0:n.color,children:o}):null,(0,a.jsx)("div",{className:"position-relative ",style:{width:"2rem",height:"2rem"},children:(0,a.jsx)(f(),{src:"/assets/img/live1.gif",className:"live-gif",fill:!0,alt:"Live status"})})]})]}),"pending"==o?(0,a.jsx)("p",{className:"order-note",children:"Your order has been received, we might call you for confirmation or address details if required."}):null,null!==le&&"auto_cancelled_payment_failed"===o&&i&&ae&&1!=F&&1!=(0,m.Mf)("easypaisa_miniapp")?(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(u.zx,{color:"success",className:"m-1 p-1 px-2 border-0 mt-3",style:{height:"unset"},onClick:function(){console.log("loading => Go to Checkout Page"),U(!1),(0,O.dh)().then((function(e){return q(e)})),le.payment_opt="cod",le.cc_tax_type="cod",le.orderToken=B,delete le.sorted_array,delete le.SS_HASH,re(le,U,ie,l,E,ee,oe)},children:[(0,a.jsx)("span",{style:{fontSize:12},children:"Continue with"}),(0,a.jsx)("span",{style:{fontWeight:"bold",fontSize:13},children:T.formatMessage({id:"CashonDelivery"})}),(0,a.jsx)(s.G,{icon:c.CvI,className:"px-2 pb-1",style:{fontSize:18}})]})}):"completed"==o||"delivered"==o||"pending"==o?null:"pickup"==I||"drive-in"==I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"order-note my-2  border-top pt-2",children:[T.formatMessage({id:"orderCollectionMsg"}),":"]}),(0,a.jsxs)("div",{className:"location-section",children:[(0,a.jsxs)("h2",{className:"location-name",children:[(0,a.jsx)("span",{className:"location-icon",children:"\ud83d\udccd"}),null===M||void 0===M?void 0:M.name]}),(null===M||void 0===M?void 0:M.address)?(0,a.jsxs)("div",{className:"detail-item",children:[(0,a.jsxs)("span",{className:"detail-label",children:[T.formatMessage({id:"Location"}),":"]}),(0,a.jsx)("span",{className:"detail-value",children:null===M||void 0===M?void 0:M.address})]}):null,(null===M||void 0===M?void 0:M.latitude)&&(null===M||void 0===M?void 0:M.longitude)?(0,a.jsxs)("a",{href:"https://www.google.com/maps/place/".concat(null===M||void 0===M?void 0:M.latitude,",").concat(null===M||void 0===M?void 0:M.longitude),className:"view-location-btn",target:"_blank",children:[(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,a.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),"View Location"]}):(0,a.jsx)(a.Fragment,{}),(null===M||void 0===M?void 0:M.phone_number)?(0,a.jsxs)("div",{className:"phone-item",children:[(0,a.jsxs)("span",{className:"detail-label",children:[T.formatMessage({id:"Phone"}),":"]}),(0,a.jsx)("a",{href:"tel:".concat(null===M||void 0===M?void 0:M.phone_number),className:"phone-link",children:null===M||void 0===M?void 0:M.phone_number})]}):null]})]}):(0,a.jsx)(a.Fragment,{})]})]}),(0,a.jsxs)("div",{className:"tracking-section",children:[w&&"on the way"===o?(0,a.jsx)(A.Z,{height:"200px",orderId:k,orderHex:j,setRiderInformation:X,google_map_api_key:C,liveStatus:o,merchantId:l,setRiderEstTime:Q}):null,W?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"delivery-time-card",children:[(0,a.jsxs)("div",{className:"time-estimate",children:[Y&&"NaNh NaNm"!=Y?(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsxs)("h2",{children:["0 - ",Y]})," "]}):null,(0,a.jsx)("div",{className:"delivery-status",children:"on the way"!==o?(0,a.jsx)("h3",{children:"Order Delivered"}):(0,a.jsx)("p",{children:"The rider will arrive as estimated within the time frame shown above"})})]}),(0,a.jsx)("div",{className:"progress-circle",children:(0,a.jsx)("video",{src:"/bike.webm",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"img-fluid",width:80,height:80,alt:"Rider is on the way"})})]}),(0,a.jsx)("div",{className:"rider-info-card",children:(0,a.jsxs)("div",{className:"rider-profile",children:[(0,a.jsx)("div",{className:"rider-avatar-img",children:(0,a.jsx)(f(),{src:"/assets/img/rider-graphic.png",alt:"Rider is on the way",className:"img-fluid",width:"0",height:"0",sizes:"100vw",style:{width:"100%",height:"auto"}})}),(0,a.jsxs)("div",{className:"rider-details",children:[(0,a.jsx)("h3",{children:null===W||void 0===W?void 0:W.driverName}),(0,a.jsx)("p",{children:"Motorbike"})]}),(0,a.jsx)("div",{className:"d-flex flex-row justify-content-between contact-info-container",children:(0,a.jsxs)("div",{className:"d-flex flex-row",style:{columnGap:".5rem"},children:[(0,a.jsx)("a",{className:"contact-icon contact-icon-whatsapp",href:"https://wa.me/".concat(W.phone),target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(s.G,{icon:d.VHX,className:"contact-icon-whatsapp-svg"})}),(0,a.jsx)("a",{className:"contact-icon contact-icon-phone",href:"tel:".concat(W.phone),rel:"noopener noreferrer",children:(0,a.jsx)(s.G,{icon:c.j1w})})]})})]})})]}):!S||W||w?null:(0,a.jsx)("div",{className:"col-md-6 col-12 px-4 d-flex flex-column panda-go-container",children:(0,a.jsxs)("a",{href:S,className:"text-decoration-none",target:"_blank",rel:"noopener noreferrer",children:[(0,a.jsx)("div",{className:"panda-go-image p-0",children:(0,a.jsx)(f(),{src:"/assets/images/mobile-tracking.gif",alt:"mobiletracking",className:"img-fluid panda-go-rider-img",width:"0",height:"0",style:{objectFit:"cover",width:145,height:145}})}),(0,a.jsxs)("div",{className:"d-flex flex-row align-items-center panda-go-text-con justify-content-end mb-4",children:[(0,a.jsx)("div",{className:"text-capitalize panda-go-text",style:{color:"rgb(84, 84, 84)",marginRight:5},children:"Delivery assigned to partner"}),(0,a.jsx)("div",{children:(0,a.jsx)(f(),{src:"/assets/images/pandagoimg.png",alt:"pandago",className:"img-fluid panda-go-img",width:"90",height:"25"})})]})]})})]})]})},le=function(e){var n=e.addon,o=(e.classes,e.isNested);return(0,a.jsxs)("div",{className:"addon-item ".concat(o?"nested-addon":""),children:[(0,a.jsxs)("div",{className:"addon-details",children:[(0,a.jsx)("span",{className:"addon-indicator",children:"+"}),(0,a.jsxs)("div",{className:"addon-info",children:[(0,a.jsxs)("span",{className:"addon-name",children:[n.name," ",n.size?"(".concat(n.size,")"):""]}),(0,a.jsxs)("span",{className:"addon-quantity",children:["Qty: ",n.qty]})]})]}),(0,a.jsx)("span",{className:"addon-price",children:n.pretty_price&&0!=n.pretty_price?n.pretty_price:"-"})]})},ae=function(e){var n=e.cart,o=e.orderDetails,i=e.isSectionHide,l=(0,x.v9)((function(e){return e.settings.staticSettings.currencySign})),s=(0,t.Z)((0,r.useState)(""),2),d=s[0],c=s[1],v=function(e){c(d===e?"":e)},m=(0,_.Z)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"product-list ".concat(i.includes("products")?"":"open"),children:n&&n.length?n.map((function(e,n){var i,t,s,c,p,h,g,f,_,x,y;return(0,a.jsxs)("div",{className:"product-container",children:[(0,a.jsxs)("div",{className:"product-item",children:[(0,a.jsxs)("div",{className:"product-details",children:[(0,a.jsxs)("span",{className:"product-name",children:[" ",null===e||void 0===e?void 0:e.item_name," ",(null===e||void 0===e||null===(i=e.size)||void 0===i?void 0:i.size)?"(".concat(null===e||void 0===e||null===(t=e.size)||void 0===t?void 0:t.size,")"):""]}),(0,a.jsxs)("span",{className:"quantity",children:[" ",m.formatMessage({id:"quantity"}),": ",null===e||void 0===e?void 0:e.qty]})]}),(0,a.jsxs)("span",{className:"price",children:[" ",(null===e||void 0===e||null===(s=e.size)||void 0===s?void 0:s.discounted_price)?(null===e||void 0===e||null===(c=e.size)||void 0===c?void 0:c.inclusive_discounted_price)?z(null===e||void 0===e||null===(p=e.size)||void 0===p?void 0:p.inclusive_discounted_price,o,l):z(null===e||void 0===e||null===(h=e.size)||void 0===h?void 0:h.discounted_price,o,l):(null===e||void 0===e||null===(g=e.size)||void 0===g?void 0:g.inclusive_tax_price)?z(null===e||void 0===e||null===(f=e.size)||void 0===f?void 0:f.inclusive_tax_price,o,l):void 0===(null===e||void 0===e||null===(_=e.size)||void 0===_?void 0:_.price)?"-":z(null===e||void 0===e||null===(x=e.size)||void 0===x?void 0:x.price,o,l)]})]}),(null===e||void 0===e?void 0:e.sub_item_obj)&&(null===(y=Object.keys(null===e||void 0===e?void 0:e.sub_item_obj))||void 0===y?void 0:y.length)?(0,a.jsx)("div",{className:"addons-container",children:Object.keys(null===e||void 0===e?void 0:e.sub_item_obj).map((function(o){var i=null===e||void 0===e?void 0:e.sub_item_obj[o];return(0,a.jsx)(r.Fragment,{children:i.map((function(e){var o,i="item-".concat(n,"-addon-").concat(e.id);return(null===(o=e.nested_addons)||void 0===o?void 0:o.length)?(0,a.jsx)(u.UQ,{open:d,toggle:v,className:"m-0 p-0",children:(0,a.jsxs)(u.Qd,{className:"m-0 p-0",children:[(0,a.jsx)(u._m,{targetId:i,className:"m-0 p-0",children:(0,a.jsx)(le,{addon:e,isNested:!1})}),(0,a.jsx)(u.X1,{accordionId:i,className:"m-0 p-0",children:e.nested_addons.map((function(e){return(0,a.jsx)(le,{addon:e,isNested:!0},e.id)}))})]})},i):(0,a.jsx)(le,{addon:e,isNested:!1},e.id)}))},o)}))}):null]},n)})):null})})},re=function(e){var n=e.branchPhoneNumber,o={backgroundColor:"#dc3545",foregroundColor:"#fff"},i=(0,_.Z)(),l=(0,x.v9)((function(e){return e.settings.isEasypaisa})),d=(0,t.Z)((0,r.useState)(""),2),u=d[0],v=d[1],p=(0,h.useRouter)().query,g=p.dineinmenu,f=p.branch_id,y=p.table_id,j=(0,h.useRouter)().query.easypaisa_miniapp,N={};1==g&&(N.dineinmenu="1"),1==g&&f&&(N.branch_id=f),1==g&&y&&(N.table_id=y);var b=new URLSearchParams(N).toString();return(0,r.useEffect)((function(){var e=localStorage.getItem("slug"),n=(0,m.Mf)("openId");1==l||1==j||"1"==localStorage.getItem("easypaisa_miniapp")?v(e?"/menu-".concat(e,"?easypaisa_miniapp=1").concat(n?"&openId="+n:""):"/?easypaisa_miniapp=1".concat(n?"&openId="+n:"")):(null===N||void 0===N?void 0:N.dineinmenu)?v(e?"/menu-".concat(e,"?").concat(b):"/?".concat(b)):v(e?"/menu-"+e:"/")}),[l]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"action-buttons",children:[(0,a.jsxs)("button",{className:"print-btn ",onClick:function(){return window.print()},children:[(0,a.jsx)(s.G,{icon:c.wf8,color:null===o||void 0===o?void 0:o.foregroundColor}),"Print"]}),(0,a.jsxs)("div",{className:"support-section",children:[(0,a.jsx)("h4",{children:"Need Support ?"}),(0,a.jsxs)("p",{children:["Question regarding your order ?"," ",(0,a.jsxs)("strong",{className:"text-dark",children:[" ","Call us:"," ",(0,a.jsx)("a",{className:"text-dark text-decoration-underline",href:"tel:".concat(n),children:n||""})]})]})]}),(0,a.jsx)("a",{className:"w-full btn btn-indolj-primary mt-1 me-4 support-button",href:u,target:"_blank",children:i.formatMessage({id:"Place another order"})})]}),(0,a.jsx)("div",{className:"footer",children:(0,a.jsxs)("span",{children:["Powered by"," ",(0,a.jsxs)("strong",{children:[" ",(0,a.jsx)("a",{target:"_blank",href:"https://www.indolj.pk",className:"ps-1 indolj-text text-dark",children:"Indolj"})]})]})})]})},se=o(37106),de=(R.ZP.currencyUnit,function(e){var n=e.street,o=e.area_name,i=e.city;e.state;return"".concat(n,", ").concat(o||i)}),ce=function(e){var n=e.date_created,o=D()(n).format("LLL");return"".concat(o)},ue=function(e,n,o,i){var t,l,a=0!=(null===n||void 0===n?void 0:n.currency_options.admin_decimal_place)?Number(null===n||void 0===n?void 0:n.currency_options.admin_decimal_place):0;return"1"===(null===n||void 0===n||null===(t=n.currency_options)||void 0===t?void 0:t.admin_round_off_amount)?"".concat(o," ").concat(Math.round(e).toFixed(a)):"".concat(o," ").concat(null===(l=Number(e))||void 0===l?void 0:l.toFixed(a))},ve=function(e,n){var o="";return e?o=e:n&&(null===n||void 0===n?void 0:n.payment_type)&&(o=null===n||void 0===n?void 0:n.payment_type),G.hK.includes(o)?"Online Payment":"obd"===o?"Bank Transfer":"cod"===o?"Cash":o.toUpperCase()},me=function(e){var n,o,i,l,d,u,v,m=e.liveStatus,p=e.logo,g=e.showTryAgainButton,y=e.merchantName,j=e.merchantId,N=e.branchId,b=e.restaurantType,w=void 0===b?"restaurant":b,k=e.apiPayload,S=e.orderHex,I=e.riderInfo,M=e.riderStatus,C=e.orderId,P=e.setshowLoader,Z=e.pandagoTrackingUrl,O=e.transType,A=e.branchDetails,L=e.google_map_api_key,T=e.harlyy_feedback_url,F=e.branch_id,R=e.orderDetails,G=e.paymentType,z=e.branchPhoneNumber,H={backgroundColor:"#dc3545",foregroundColor:"#fff"},U=(0,x.I0)(),J=(0,_.Z)(),B=((0,h.useRouter)().locale,(0,x.v9)((function(e){return e.settings.staticSettings.currencySign}))),q=(0,t.Z)((0,r.useState)(!1),2),K=q[0],W=q[1],X=(0,t.Z)((0,r.useState)(0),2),V=X[0],Y=X[1],Q=(0,t.Z)((0,r.useState)(0),2),$=Q[0],ee=Q[1],ne=(0,t.Z)((0,r.useState)([]),2),oe=ne[0],le=ne[1],me=(0,t.Z)((0,r.useState)([]),2),pe=me[0],he=me[1],ge=function(e){pe.includes(e)?he(pe.filter((function(n){return n!==e}))):he((0,ie.Z)(pe).concat([e]))};return(0,r.useEffect)((function(){var e,n,o,i,t,l,a;["200264","200350","200413","200236","200334"].includes(null===R||void 0===R?void 0:R.merchant_id)||1==(null===R||void 0===R?void 0:R.hide_delivery_time_from_store_receipt)||"dinein"===(null===R||void 0===R?void 0:R.trans_type)?W(!0):W(!1);var r=(null===R||void 0===R||null===(e=R.total)||void 0===e?void 0:e.iikoLoyaltyAmount)||(null===R||void 0===R||null===(n=R.total)||void 0===n?void 0:n.redeemed_loyalty_price)||0;Y(r),U((0,E.Jd)(null===R||void 0===R||null===(o=R.currency_options)||void 0===o?void 0:o.admin_currency_symbol));var s,d,c=0,u=0;if((null===R||void 0===R||null===(i=R.total)||void 0===i?void 0:i.stripe_client_fee)&&(null===R||void 0===R||null===(t=R.total)||void 0===t?void 0:t.stripe_fee_percentage))u=Number(null===R||void 0===R||null===(s=R.total)||void 0===s?void 0:s.stripe_fee_percentage),c=Number(null===R||void 0===R||null===(d=R.total)||void 0===d?void 0:d.stripe_client_fee);else if(null===R||void 0===R||null===(l=R.total)||void 0===l?void 0:l.stripe_client_fee){var v;c=Number(null===R||void 0===R||null===(v=R.total)||void 0===v?void 0:v.stripe_client_fee)}else if(null===R||void 0===R||null===(a=R.total)||void 0===a?void 0:a.stripe_fee_percentage){var m;u=Number(null===R||void 0===R||null===(m=R.total)||void 0===m?void 0:m.stripe_fee_percentage)}ee(c+u)}),[R]),(0,r.useEffect)((function(){var e,n=null===R||void 0===R||null===(e=R.cart_parsed)||void 0===e?void 0:e.filter((function(e){return parseInt(null===e||void 0===e?void 0:e.tax_class_id)>0}));le(n)}),[null===R||void 0===R?void 0:R.cart_parsed]),(0,a.jsx)("div",{className:"bg-light",children:(0,a.jsxs)("div",{className:"order-confirmation",children:[(0,a.jsx)("div",{className:"header",children:(0,a.jsx)("div",{className:"logo",children:(0,a.jsx)(f(),{src:p,height:100,width:100,alt:"KABABJEES FRIED CHICKEN"})})}),(0,a.jsx)(te,{liveStatus:m,logo:p,showTryAgainButton:g,merchantName:y,merchantId:j,branchId:N,restaurantType:w,apiPayload:k,orderHex:S,riderInfo:I,riderStatus:M,orderId:C,setshowLoader:P,pandagoTrackingUrl:Z,transType:O,branchDetails:A,google_map_api_key:L,harlyy_feedback_url:T,branch_id:F}),(0,a.jsxs)("div",{className:"info-section",children:[(0,a.jsxs)("div",{className:"section-header",onClick:function(){return ge("customer")},children:[(0,a.jsx)(s.G,{icon:c.m08,className:"icon"}),(0,a.jsx)("h3",{children:"Customer Information"})]}),(0,a.jsxs)("div",{className:"info-content ".concat(pe.includes("customer")?"":"open"),children:[(0,a.jsxs)("div",{className:"info-item",children:[(0,a.jsx)(s.G,{icon:c.ILF,color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsxs)("span",{className:"label",children:[" ",J.formatMessage({id:"customerName"})]}),(0,a.jsxs)("span",{className:"value",children:[" ",R?null===R||void 0===R?void 0:R.full_name:null]})]})]}),(0,a.jsxs)("div",{className:"info-item",children:[(0,a.jsx)(s.G,{icon:c.Z__,color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsx)("span",{className:"label",children:J.formatMessage({id:"mobileNo"})}),(0,a.jsxs)("span",{className:"value",children:[" ",R?null===R||void 0===R?void 0:R.contact_phone:null]})]})]}),(null===R||void 0===R?void 0:R.email_address)?(0,a.jsxs)("div",{className:"info-item",children:[(0,a.jsx)(s.G,{icon:c.FU$,color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsx)("span",{className:"label",children:J.formatMessage({id:"email"})}),(0,a.jsxs)("span",{className:"value",children:[" ",null===R||void 0===R?void 0:R.email_address]})]})]}):null,(null===R||void 0===R?void 0:R.alternate_phone)?(0,a.jsxs)("div",{className:"info-item",children:[(0,a.jsx)(s.G,{icon:c.Z__,color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsx)("span",{className:"label",children:J.formatMessage({id:"alternateMobileNo"})}),(0,a.jsxs)("span",{className:"value",children:[" ",null===R||void 0===R?void 0:R.alternate_phone]})]})]}):null]})]}),(0,a.jsxs)("div",{className:"info-section",children:[(0,a.jsxs)("div",{className:"section-header",onClick:function(){return ge("deliveryInfo")},children:["delivery"==(null===R||void 0===R?void 0:R.trans_type)?(0,a.jsx)(s.G,{icon:c._Vg,className:"icon"}):(0,a.jsx)(se.mCz,{className:"icon"}),(0,a.jsxs)("h3",{children:[(null===R||void 0===R?void 0:R.trans_type)?R.trans_type.charAt(0).toUpperCase()+R.trans_type.slice(1):"Order"," Information"]})]}),(0,a.jsxs)("div",{className:"info-content ".concat(pe.includes("deliveryInfo")?"":"open"),children:["delivery"==(null===R||void 0===R?void 0:R.trans_type)?(0,a.jsxs)("div",{className:"info-item",children:[(0,a.jsx)(s.G,{icon:c.opg,color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsxs)("span",{className:"label",children:[" ",J.formatMessage({id:"deliveryAddress"})]}),(0,a.jsx)("span",{className:"value",children:R?de(R):null})]})]}):null,(null===R||void 0===R?void 0:R.branchName)?(0,a.jsxs)("div",{className:"info-item",children:[(0,a.jsx)(s.G,{icon:c.opg,color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsxs)("span",{className:"label",children:[" ",J.formatMessage({id:"branchname"})]}),(0,a.jsx)("span",{className:"value",children:R?null===R||void 0===R?void 0:R.branchName:null})]})]}):null,(0,a.jsxs)("div",{className:"info-item",children:["delivery"==(null===R||void 0===R?void 0:R.trans_type)?(0,a.jsx)(s.G,{icon:c._Vg,color:"#0009"}):(0,a.jsx)(se.mCz,{className:"icon",color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsxs)("span",{className:"label",children:[" ",J.formatMessage({id:"Order Type"})]}),(0,a.jsx)("span",{className:"value",children:R?null===R||void 0===R?void 0:R.trans_type:null})]})]}),(0,a.jsxs)("div",{className:"info-item",children:[(0,a.jsx)(s.G,{icon:c.IV4,color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsxs)("span",{className:"label",children:[" ",J.formatMessage({id:"order"})," ",J.formatMessage({id:"date"})," &"," ",J.formatMessage({id:"time"})]}),(0,a.jsx)("span",{className:"value",children:R?ce(R):null})]})]}),K||(null===R||void 0===R?void 0:R.hide_delivery_time_on_receipt)?null:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"info-item",children:[(0,a.jsx)(s.G,{icon:c.IV4,color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsxs)("span",{className:"label",children:["pickup"===(null===R||void 0===R?void 0:R.trans_type)?J.formatMessage({id:"Pickup"}):J.formatMessage({id:"Delivery"})," ",J.formatMessage({id:"date"})," & "," ",J.formatMessage({id:"time"})]}),(0,a.jsxs)("span",{className:"value",children:[" ",R?D()(null===R||void 0===R?void 0:R.delivery_date).format("LL")+("200514"===(null===R||void 0===R?void 0:R.merchant_id)&&"41174"===(null===R||void 0===R?void 0:R.branch_id)?"":" "+(null===R||void 0===R?void 0:R.delivery_time)):null]})]})]})}),(null===R||void 0===R?void 0:R.delivery_instruction)?(0,a.jsxs)("div",{className:"info-item",children:[(0,a.jsx)(s.G,{icon:c.mSY,color:"#0009"}),(0,a.jsxs)("div",{className:"info-text",children:[(0,a.jsxs)("span",{className:"label",children:[" ",J.formatMessage({id:"instructions"})]}),(0,a.jsx)("span",{className:"value",children:R?null===R||void 0===R?void 0:R.delivery_instruction:null})]})]}):""]})]}),(0,a.jsxs)("div",{className:"info-section",children:[(0,a.jsxs)("div",{className:"section-header",onClick:function(){return ge("products")},children:[(0,a.jsx)(s.G,{icon:c.yYj,className:"icon"}),(0,a.jsx)("h3",{children:J.formatMessage({id:"product"})})]}),(0,a.jsx)(ae,{cart:null===R||void 0===R?void 0:R.cart_parsed,orderDetails:R,isSectionHide:pe})]}),(0,a.jsxs)("div",{className:"info-section payment-section",children:[(0,a.jsxs)("div",{className:"section-header",onClick:function(){return ge("payment")},children:[(0,a.jsx)(s.G,{icon:c.Ozh,className:"icon"}),(0,a.jsxs)("h3",{children:[" ",J.formatMessage({id:"payment"})," ",J.formatMessage({id:"type"})]}),(0,a.jsxs)("span",{className:"payment-method",children:[(0,a.jsx)(s.G,{icon:c.CvI,color:null===H||void 0===H?void 0:H.foregroundColor})," ",ve(G,R)]})]}),(0,a.jsxs)("div",{className:"info-content-2 ".concat(pe.includes("payment")?"":"open"),children:[(0,a.jsxs)("div",{className:"payment-breakdown",children:[(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsx)("span",{children:J.formatMessage({id:"total"})}),(0,a.jsxs)("span",{children:[" ",R?ue(null===R||void 0===R?void 0:R.sub_total,R,B):null]})]}),R&&(null===R||void 0===R?void 0:R.cart_tip_value)&&"0.0000"!=(null===R||void 0===R?void 0:R.cart_tip_value)&&(null===R||void 0===R?void 0:R.cart_tip_percentage)?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsxs)("span",{children:[" ",J.formatMessage({id:"tip"})," "]}),(0,a.jsxs)("span",{children:[" ",R?ue(null===R||void 0===R?void 0:R.cart_tip_value,R,B):null]})]}):null,R&&(null===R||void 0===R?void 0:R.discounted_amount)&&0!=(null===R||void 0===R?void 0:R.discounted_amount)?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsx)("span",{children:J.formatMessage({id:"discount"})}),(0,a.jsxs)("span",{children:[" ",R?ue(null===R||void 0===R?void 0:R.discounted_amount,R,B):null]})]}):null,R&&(null===R||void 0===R?void 0:R.voucher_code)?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsxs)("span",{children:[" ",J.formatMessage({id:"voucher"})," ","(".concat(null===R||void 0===R?void 0:R.voucher_code,")")]}),(0,a.jsxs)("span",{children:[" ",R?"(".concat(ue(null===R||void 0===R?void 0:R.voucher_amount,R,B),")"):null]})]}):null,"pickup"!=(null===R||void 0===R?void 0:R.trans_type)&&0!=(null===R||void 0===R?void 0:R.delivery_charge)?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsxs)("span",{children:[" ",J.formatMessage({id:"deliveryFee"})]}),(0,a.jsxs)("span",{children:[" ",R?ue(null===R||void 0===R?void 0:R.delivery_charge,R,B):null]})]}):null,"pickup"!=(null===R||void 0===R?void 0:R.trans_type)&&(null===R||void 0===R?void 0:R.additionalDc)&&0!=(null===R||void 0===R?void 0:R.additionalDc)?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsxs)("span",{children:[" ",J.formatMessage({id:"additional"})," ",J.formatMessage({id:"deliveryFee"})]}),(0,a.jsxs)("span",{children:[" ",R?ue(null===R||void 0===R?void 0:R.additionalDc,R,B):null]})]}):null,$?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsxs)("span",{children:[J.formatMessage({id:"stripeFee"})," "]}),(0,a.jsxs)("span",{children:[" ",R?ue($,R,B):null]})]}):null,R&&0!=(null===R||void 0===R?void 0:R.tax)?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsxs)("span",{children:[" ","AE"==(null===R||void 0===R||null===(n=R.merchant_info)||void 0===n?void 0:n.country_code)?"VAT":J.formatMessage({id:"tax"})," ",(null===oe||void 0===oe?void 0:oe.length)||(null===R||void 0===R?void 0:R.hide_tax_percentage)?null:parseInt(null===R||void 0===R?void 0:R.tax).toFixed(2)+"%"]}),(0,a.jsxs)("span",{children:[" ",R?ue(null===R||void 0===R?void 0:R.taxable_total,R,B):null]})]}):null,1==(null===R||void 0===R?void 0:R.is_redeemed)&&V?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsx)("span",{children:J.formatMessage({id:"loyaltyPoints"})}),(0,a.jsxs)("span",{children:[" ",V]})]}):null,(null===R||void 0===R||null===(o=R.total)||void 0===o||null===(i=o.third_party_loyalty)||void 0===i?void 0:i.redeemed_points)&&Number(null===R||void 0===R||null===(l=R.total)||void 0===l||null===(d=l.third_party_loyalty)||void 0===d?void 0:d.redeemed_points)>0?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsxs)("span",{children:[" ",J.formatMessage({id:"loyaltyPoints"})]}),(0,a.jsxs)("span",{children:[" ",ue(null===R||void 0===R||null===(u=R.total)||void 0===u||null===(v=u.third_party_loyalty)||void 0===v?void 0:v.redeemed_points,R,B)]})]}):null,(null===R||void 0===R?void 0:R.wallet_redeemed_points)>0?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsxs)("span",{children:[" ",J.formatMessage({id:"paidThroughWallet"})]}),(0,a.jsxs)("span",{children:[" ",ue(null===R||void 0===R?void 0:R.wallet_redeemed_points,R,B)]})]}):null,(null===R||void 0===R?void 0:R.bank_card_discounted_amount)&&0!=(null===R||void 0===R?void 0:R.bank_card_discounted_amount)?(0,a.jsxs)("div",{className:"payment-row",children:[(0,a.jsxs)("span",{children:[J.formatMessage({id:"bank"})," ",J.formatMessage({id:"discount"})]}),(0,a.jsx)("span",{children:ue(null===R||void 0===R?void 0:R.bank_card_discounted_amount,R,B)})]}):null]}),(0,a.jsxs)("div",{className:"grand-total",children:[(0,a.jsx)("span",{children:J.formatMessage({id:"grandTotal"})}),(0,a.jsxs)("span",{children:[" ",R?ue(null===R||void 0===R?void 0:R.total_w_tax,R,B):null]})]})]})]}),(0,a.jsx)(re,{branchPhoneNumber:z})]})})},pe=function(){var e=localStorage.getItem("customerInfo");if(e)return e=JSON.parse(e)},he=function(e){var n,s=e.orderDetailsFromSSR,d=void 0!==s&&s,c=e.dir,u=(0,p.xQ)(),g=u.apiUrl,f=u.baseUrl,b=u.server,S=u.assestUrl,I=(0,j.Lc)(),M=(0,h.useRouter)().query.id,C=(0,h.useRouter)().query.close_window,P=(0,x.v9)((function(e){return e.receipt.confirmNotification})),Z=new URLSearchParams(window.location.search),O=(0,t.Z)((0,r.useState)(""),2),A=O[0],T=O[1],F=(0,t.Z)((0,r.useState)(""),2),D=F[0],R=F[1],z=(0,t.Z)((0,r.useState)(!1),2),W=z[0],ie=z[1],te=(0,t.Z)((0,r.useState)(!1),2),le=te[0],ae=te[1],re=(0,t.Z)((0,r.useState)(!0),2),se=re[0],de=re[1],ce=(0,t.Z)((0,r.useState)(null),2),ue=(ce[0],ce[1]),ve=(0,t.Z)((0,r.useState)(null),2),he=ve[0],ge=ve[1],fe=(0,t.Z)((0,r.useState)(null),2),_e=fe[0],xe=fe[1],ye=(0,t.Z)((0,r.useState)(!1),2),je=ye[0],Ne=ye[1],be=(0,t.Z)((0,r.useState)(null),2),we=be[0],ke=be[1],Se=(0,t.Z)((0,r.useState)(!1),2),Ie=Se[0],Me=Se[1],Ce=(0,t.Z)((0,r.useState)(!1),2),Pe=(Ce[0],Ce[1]),Ze=(0,x.I0)(),Oe=(0,_.Z)(),Ae=(0,t.Z)((0,r.useState)(null===(n=function(){var e="undefined"!==typeof localStorage?localStorage.getItem("socialURL"):null;return e?e=JSON.parse(e):{iconLinks:null,floatingWhatsAppNo:"",fbUrl:null,instaUrl:null}}())||void 0===n?void 0:n.floatingWhatsAppNo),2),Le=(Ae[0],Ae[1],(0,t.Z)((0,r.useState)("undefined"===typeof Notification||"granted"!==Notification.permission),2)),Ee=Le[0],Te=Le[1],Fe=(0,t.Z)((0,r.useState)(!1),2),De=Fe[0],Re=Fe[1],Ge=(0,t.Z)((0,r.useState)({line1:Oe.formatMessage({id:"shareCurrentLocation"}),line2:""}),2),ze=Ge[0],He=Ge[1],Ue=(0,t.Z)((0,r.useState)(""),2),Je=Ue[0],Be=Ue[1],qe=(0,t.Z)((0,r.useState)([]),2),Ke=qe[0],We=qe[1],Xe=(0,x.v9)((function(e){return e.settings.selectedCoords})),Ve=(0,x.v9)((function(e){return e.settings.meta})),Ye=(0,x.v9)((function(e){return e.settings.isFirebaseActive})),Qe=(0,t.Z)((0,r.useState)(!1),2),$e=Qe[0],en=Qe[1],nn=JSON.parse(N.tO.getData("match_address"));(0,r.useEffect)((function(){var e=(0,m.AK)("coordinates");Ze((0,E.hI)(e))}),[]),(0,r.useEffect)((function(){var e=(0,m.Mf)("formatted_address");if(!(D&&(null===D||void 0===D?void 0:D.enable_gmap_api_on_receipt)&&(null===D||void 0===D?void 0:D.main_screen_google_map_api_key))||Xe&&Xe.lat&&Xe.lng||nn||"delivery"!=(null===D||void 0===D?void 0:D.trans_type)){if((null===D||void 0===D?void 0:D.enable_gmap_api_on_receipt)&&(null===D||void 0===D?void 0:D.main_screen_google_map_api_key)&&Xe&&Xe.lat&&Xe.lng&&e&&!nn){if("delivery"==(null===D||void 0===D?void 0:D.trans_type)){var n={line1:Oe.formatMessage({id:"orderDeliveryLocation"}),line2:"would you like to change it?"};He(n),Re(!0)}Be(e)}}else Re(!0)}),[D,nn]),(0,r.useEffect)((function(){"undefined"!==typeof Notification?"granted"==Notification.permission?(Te(!1),Ze((0,L.G)(!0))):"denied"==Notification.permission?Te(!1):Te(!0):Te(!0)}),[]);var on=function(){var e=(0,i.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,ee.G8)(Xe,M,g)];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),console.error("error occur while updating address",e),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();function tn(e){P&&Promise.resolve().then(o.bind(o,67672)).then((function(n){var o=n.messaging;Notification.requestPermission(),o&&(0,K.LP)(o,{vapidKey:"BBaRhwXSlFl4CHgHBgUgHDF12t1TgQiZkRyJLRoV--YYt90iuDA6YjDLpqgPhx3VOaNPtfd9EoEbSNVPJtHTr4w"}).then((function(n){!function(e,n){var o,i,t=null===(o=(0,m.AK)("otp_details"))||void 0===o||null===(i=o.user)||void 0===i?void 0:i.token,l=new URL(g+(t?"RegisterClientWebToken":"RegisterGuestClientWebToken")),a=localStorage.getItem("authToken");t?l.searchParams.append("client_token",t):l.searchParams.append("phone",null===n||void 0===n?void 0:n.contact_phone);l.searchParams.append("merchant_id",null===n||void 0===n?void 0:n.merchant_id),l.searchParams.append("token",e),l.searchParams.append("json",1);try{v.Z.get(l,{headers:{Authorization:"Bearer ".concat(a)}})}catch(r){console.log("sendClentTokenAndUserToServer error: ",r),k.Am.error(Oe.formatMessage({id:"somethingWentWrong"}),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"colored"})}}(n,e)}))}))}(0,r.useEffect)((function(){console.log("selectedCoordsorderDetails?.orderId",Xe),Xe&&M&&on()}),[Xe,M]),(0,r.useEffect)((function(){D&&P&&Ye&&tn(D)}),[P,D]),(0,r.useEffect)((function(){Ye&&(null===D||void 0===D?void 0:D.fireBasetoken)&&(0,$.C0)(null===D||void 0===D?void 0:D.fireBasetoken).then((function(e){W&&le&&Promise.resolve().then(o.bind(o,67672)).then((function(e){var n=e.db,o=(0,J.IO)((0,J.iH)(n,b+"/merchants/"+le+"/status/"+W)),i=(0,J.IO)((0,J.iH)(n,b+"/merchants/"+le+"/driverTasks/"+W));(0,J.jM)(o,(function(e){var n=e.val();if(console.log("loading => firebase realtime data",n),n&&"initial_order"!==(null===n||void 0===n?void 0:n.status)&&"auto_cancelled_payment_failed"!==(null===n||void 0===n?void 0:n.status)&&de(!1),(null===n||void 0===n?void 0:n.driver_name)&&(null===n||void 0===n?void 0:n.driver_phone)){var o={driverName:n.driver_name,phone:n.driver_phone};xe(o)}ue(null===n||void 0===n?void 0:n.payment_type),ge(null===n||void 0===n?void 0:n.status),Ne(null===n||void 0===n?void 0:n.pandaGoTracking)})),(0,J.jM)(i,(function(e){e.val()}))}))})).catch((function(e){console.error("Authentication error:",e)}))}),[W,le,null===D||void 0===D?void 0:D.fireBasetoken]);var ln=function(){var e=(0,i.Z)((function(){var e,n,o,i;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:e={json:"1",orderId:M},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,w.P)("GET",g,"GetFpTrackingLink",null,e)];case 2:return(n=t.sent())&&1===n.code&&ke(null===n||void 0===n||null===(o=n.details)||void 0===o?void 0:o.link),[3,4];case 3:return i=t.sent(),console.log("loading => axios pandago error",i),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){localStorage.removeItem("indoljCartObj"),localStorage.removeItem("setfreeDeliveryByItems"),je&&ln()}),[je]);function an(e){e.cart_parsed=JSON.parse(e.json_details),console.log("loading => rawOrderDetails",e),ie(e.order_id),ae(e.merchant_id),R(e),function(e,n){var o,i,t,l,a,r,s,d,c,u,v=localStorage.getItem("themes");v?(s=null===(c=JSON.parse(v))||void 0===c?void 0:c.backgroundColor,d=null===(u=JSON.parse(v))||void 0===u?void 0:u.foregroundColor):(s=e.merchant_background_color,d=e.merchant_foreground_color);var m=document.querySelector(":root");m.style.setProperty("--foreground-color",d),m.style.setProperty("--background-color",s),m.style.setProperty("--logoContainerWidth","".concat((null===(o=I[n])||void 0===o?void 0:o.rectangleReciptWidth)?I[n].rectangleReciptWidth+"px":(null===(i=I[n])||void 0===i?void 0:i.rectangleWidth)?I[n].rectangleWidth+"px":"")),m.style.setProperty("--logoContainerHeight","".concat((null===(t=I[n])||void 0===t?void 0:t.rectangleReciptHeight)?I[n].rectangleReciptHeight+"px":(null===(l=I[n])||void 0===l?void 0:l.rectangleHeight)?I[n].rectangleHeight+"px":"")),m.style.setProperty("--receiptLogoMarginTop","".concat((null===(a=I[n])||void 0===a?void 0:a.receiptLogoMarginTop)?I[n].receiptLogoMarginTop+"px":"")),m.style.setProperty("--receiptLogoMarginBottom","".concat((null===(r=I[n])||void 0===r?void 0:r.receiptLogoMarginBottom)?I[n].receiptLogoMarginBottom+"px":""))}(e,e.merchant_id),Ye||tn(e),localStorage.removeItem("customTime");var n=!1;localStorage.getItem("isSavyourOn")&&(n=!0,localStorage.removeItem("isSavyourOn"));var o=localStorage.getItem("analyticsTriggered")||"";if("200195"!==le&&!function(e){return["initial_order","auto_cancelled_payment_failed"].includes(null===e||void 0===e?void 0:e.status)}(e)&&(!o||o!==M)){var i,t=A||M;if((0,U.hR)("purchase",e.cart_parsed,e.total_w_tax,e.merchant_id,t,n,e,e.branch_name,g,C,null===e||void 0===e||null===(i=e.currency_options)||void 0===i?void 0:i.admin_currency_set,null===e||void 0===e?void 0:e.city,null===e||void 0===e?void 0:e.state),null===Ve||void 0===Ve?void 0:Ve.tiktokMeta){var l,a,r,s=null===e||void 0===e||null===(l=e.items)||void 0===l?void 0:l.map((function(e){var n=e.qty;return{content_id:e.item_id,quantity:n}})),d=null===e||void 0===e||null===(a=e.items)||void 0===a?void 0:a.map((function(e){return e.item_id})),c=(null===D||void 0===D||null===(r=D.currency_options)||void 0===r?void 0:r.admin_currency_set)||"PKR",u=e.total_w_tax,v=(0,oe.getPlatformAttributionData)("tiktok");window&&"placeOrderEvent"in window&&"undefined"!==typeof window.placeOrderEvent&&window.placeOrderEvent(d,c,u,s,v),window&&"CompletePaymentEvent"in window&&"undefined"!==typeof window.CompletePaymentEvent&&setTimeout((function(){window.CompletePaymentEvent(d,c,u,s,v)}),500)}}}var rn=function(){var e=(0,i.Z)((function(e){var n,o,i,t;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:n={json:"1",order_id:e},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,w.P)("POST",g,"GetOrderDetails",null,n)];case 2:return(o=l.sent())&&1===o.code&&(console.log("loading => axios GetOrderDetails success",o),i={data:o},localStorage.removeItem("onlinePaymentTax"),an(i.data.details)),[3,4];case 3:return t=l.sent(),console.log("loading => axios GetOrderDetails error",t),[3,4];case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){var e=M||Z.get("id");e&&T(e)}),[M,Z]),(0,r.useEffect)((function(){localStorage.removeItem("initiateCheckout"),d&&an(d)}),[d]),(0,r.useEffect)((function(){console.log("orderHex",g&&A&&!d),console.log("orderHex 2",g,A,d),g&&A&&!d&&rn(A)}),[A,g,d]),(0,r.useEffect)((function(){var e,n,o,i,t,l,a,r,s,d,c,u={contact_phone:null===(e=pe())||void 0===e?void 0:e.contactPhone,title:null===(n=pe())||void 0===n?void 0:n.title,first_name:null===(o=pe())||void 0===o?void 0:o.fullName,last_name:null===(i=pe())||void 0===i?void 0:i.fullName,email_address:null===(t=pe())||void 0===t?void 0:t.email,city:(null===D||void 0===D?void 0:D.city)?(0,m.A7)(null===D||void 0===D?void 0:D.city):null,state:(null===D||void 0===D?void 0:D.state)&&"PK"==(null===D||void 0===D||null===(l=D.currency_options)||void 0===l?void 0:l.admin_country_set)?(0,m.A7)(null===D||void 0===D?void 0:D.state):null,countrycode:(null===D||void 0===D||null===(a=D.currency_options)||void 0===a?void 0:a.admin_country_set)?null===D||void 0===D||null===(r=D.currency_options)||void 0===r?void 0:r.admin_country_set:null};u=JSON.stringify(u);var p,h={currency:null===D||void 0===D||null===(s=D.currency_options)||void 0===s?void 0:s.admin_currency_set,value:Number(null===D||void 0===D?void 0:D.total_w_tax),content_type:"product",content_ids:null===D||void 0===D||null===(d=D.items)||void 0===d?void 0:d.map((function(e){return null===e||void 0===e?void 0:e.item_name})),num_items:null===D||void 0===D||null===(c=D.items)||void 0===c?void 0:c.length};h=JSON.stringify(h),"undefined"!==typeof localStorage&&(p=localStorage.getItem("checkout_and_purchase_event")),D&&le&&(0,m.iu)()&&1!=localStorage.getItem("pixelPurchaseEventTriggered")&&(0,m.WO)(v.Z,f,le,u,null,"Purchase",h,p,A),null===Ve||void 0===Ve||Ve.tiktokMeta;var g=setTimeout((function(){if(window.snaptr){var e=(0,oe.getPlatformAttributionData)("snapchat");h=JSON.parse(h);var n={value:(0,ne.m6)(null===h||void 0===h?void 0:h.value),currency:null===h||void 0===h?void 0:h.currency,transaction_id:A,item_ids:null===h||void 0===h?void 0:h.content_ids,item_category:null===h||void 0===h?void 0:h.content_type,number_items:null===h||void 0===h?void 0:h.num_items,_scid:(null===e||void 0===e?void 0:e._scid)||"",_sctr:(null===e||void 0===e?void 0:e._sctr)||"",_sc_rid:(null===e||void 0===e?void 0:e._sc_rid)||""};(0,m.Wm)("PURCHASE",n)}}),1e3);return function(){return clearTimeout(g)}}),[le,D]),(0,r.useEffect)((function(){setTimeout((function(){(0,oe.clearAttributionData)()}),15e3)}),[]),(0,r.useEffect)((function(){window.scrollTo(0,0),Ze((0,E.Co)(!1)),Ze((0,V.JX)(0)),localStorage.removeItem("walletUsed")}),[]),(0,r.useEffect)((function(){"gtag"in window&&"function"===typeof window.gtag||C&&window.close()}),[]),(0,r.useEffect)((function(){if((null===D||void 0===D?void 0:D.main_screen_google_map_api_key)&&(null===D||void 0===D?void 0:D.enable_gmap_api_on_receipt)){if(document.querySelector('script[src*="maps.googleapis.com/maps/api/js"]'))return;var e=null===D||void 0===D?void 0:D.main_screen_google_map_api_key,n=document.createElement("script");n.src="https://maps.googleapis.com/maps/api/js?key=".concat(e,"&libraries=places"),n.async=!0,n.defer=!0;var o=function(){console.log("loading => Google Maps API loaded successfully.")};return n.addEventListener("load",o),document.head.appendChild(n),function(){if(n.removeEventListener("load",o),n.parentNode)try{document.head.removeChild(n)}catch(e){console.warn("Error removing Google Maps script:",e)}}}}),[D]),(0,r.useEffect)((function(){G.cV.includes(le)?document.body.classList.remove("dark-theme"):(0,m.Mf)("dark")&&1==(0,m.Mf)("dark")?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}),[]);if(D)return(0,a.jsxs)(a.Fragment,{children:[d?"":(0,a.jsx)(B.Z,{meta:(0,q.i7)(D,S)}),(0,a.jsxs)("div",{dir:c,className:"merchant-".concat(null===D||void 0===D?void 0:D.merchant_id),children:[(null===D||void 0===D?void 0:D.receipt_banner_photo)?(0,a.jsx)(Y,{image:null===D||void 0===D?void 0:D.receipt_banner_photo}):(0,a.jsx)(a.Fragment,{}),(0,a.jsxs)("div",{className:"topbar-container receipt_page",children:[$e?(0,a.jsx)(y.Z,{}):(0,a.jsx)(a.Fragment,{}),(null===D||void 0===D?void 0:D.enable_gmap_api_on_receipt)&&(null===D||void 0===D?void 0:D.main_screen_google_map_api_key)&&!Xe?(0,a.jsx)(Q.Z,{userAddresses:Ke,setUserAddresses:We,apiKey:null===D||void 0===D?void 0:D.main_screen_google_map_api_key}):(0,a.jsx)(a.Fragment,{}),null,(0,a.jsx)(X,{modal:Ee,setModal:Te,msg:{line1:"".concat(Oe.formatMessage({id:"Do you want to receive order notifications"}),"?")},type:"notification"}),(0,a.jsx)(X,{modal:De,setModal:Re,msg:ze,type:"location",foregroundColor:D.merchant_background_color,address:Je,merchantId:null===D||void 0===D?void 0:D.merchant_id})]}),(0,a.jsx)(me,{liveStatus:he||(null===D||void 0===D?void 0:D.status),logo:(null===D||void 0===D?void 0:D.merchant_logo)?"".concat(S).concat(null===D||void 0===D?void 0:D.merchant_logo):"",showTryAgainButton:se,merchantName:null===D||void 0===D?void 0:D.merchant_name,merchantId:le,branchId:null===D||void 0===D?void 0:D.branch_id,restaurantType:null===D||void 0===D?void 0:D.merchant_category,apiPayload:D,orderHex:A,status:D.status,paymentType:D.payment_type,orderId:W,riderInfo:_e,riderStatus:D.driver_app_enabled,showLoader:$e,setshowLoader:en,pandagoTrackingUrl:we,transType:null===D||void 0===D?void 0:D.trans_type,branchDetails:{address:null===D||void 0===D?void 0:D.branchAddress,latitude:null===D||void 0===D?void 0:D.branchLatitude,longitude:null===D||void 0===D?void 0:D.branchLongitude,phone_number:null===D||void 0===D?void 0:D.merchant_contact_phone,name:null===D||void 0===D?void 0:D.branchName},google_map_api_key:null===D||void 0===D?void 0:D.main_screen_google_map_api_key,harlyy_feedback_url:null===D||void 0===D?void 0:D.harlyy_feedback_url,branch_id:null===D||void 0===D?void 0:D.branch_id,orderDetails:D,setPlayGame:Me,playGame:Ie,setAnimate:Pe,branchPhoneNumber:null===D||void 0===D?void 0:D.merchant_contact_phone}),(0,a.jsx)("div",{children:"360"===le?(0,a.jsx)(H,{merchantName:null===D||void 0===D?void 0:D.merchant_name}):null})]})]})}},18036:function(e,n,o){var i=o(47568),t=o(828),l=o(70655),a=o(85893),r=o(67294),s=o(11163),d=o(37054),c=o(50450),u=o(46299),v=o(70893),m=o(22920),p=o(86896),h=o(77561),g=(o(59441),o(76289)),f=["places"];n.Z=function(e){var n=e.height,o=void 0===n?"100vh":n,_=(e.orderId,e.setRiderInformation),x=e.google_map_api_key,y=e.orderHex,j=e.liveStatus,N=e.merchantId,b=e.setRiderEstTime,w=x||"AIzaSyCyv9OOwVr5LW-uG9D-DUdcQvw41hIFfDs",k=(0,s.useRouter)().query.id,S=(0,t.Z)((0,r.useState)(null),2),I=S[0],M=S[1],C=(0,t.Z)((0,r.useState)(null),2),P=C[0],Z=C[1],O=(0,t.Z)((0,r.useState)(!1),2),A=O[0],L=O[1],E=(0,t.Z)((0,r.useState)(null),2),T=E[0],F=E[1],D=(0,t.Z)((0,r.useState)(null),2),R=D[0],G=D[1],z=(0,t.Z)((0,r.useState)(""),2),H=z[0],U=z[1],J=(0,t.Z)((0,r.useState)(!1),2),B=J[0],q=J[1],K=(0,p.Z)(),W=(0,v.xQ)().baseUrl,X=(0,d.Db)({googleMapsApiKey:w,libraries:f}).isLoaded,V={width:"100%",height:o};(0,r.useEffect)((function(){var e=function(){var e=(0,i.Z)((function(){var e,n,o,i,t,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return e={order_id:y,json:"1"},[4,(0,h.P)("GET",W,"/mobileapp/WebApi/GetRiderLocationByOrderId",null,e)];case 1:return 1==(null===(n=l.sent())||void 0===n?void 0:n.code)&&(null===n||void 0===n?void 0:n.details)&&("on the way"===j?((t={lat:Number(null===n||void 0===n||null===(o=n.details)||void 0===o?void 0:o.location_lat),lng:Number(null===n||void 0===n||null===(i=n.details)||void 0===i?void 0:i.location_lng)}).lat&&t.lng&&(null===R||void 0===R?void 0:R.lat)&&(null===R||void 0===R?void 0:R.lng)&&(a=(0,g.Zh)({riderLat:null===t||void 0===t?void 0:t.lat,riderLng:null===t||void 0===t?void 0:t.lng,userLat:null===R||void 0===R?void 0:R.lat,userLng:null===R||void 0===R?void 0:R.lng,config:{urbanity:"urban"}}),b&&b((0,g.kB)(a))),M(t)):"delivered"===j&&(M(null),_&&_(null),m.Am.success(K.formatMessage({id:"orderDelivered"}),{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"colored"}))),[2]}}))}));return function(){return e.apply(this,arguments)}}();e();var n=setInterval(e,"221133"==N?1e4:15e3);return function(){return clearInterval(n)}}),[k]),(0,r.useEffect)((function(){Y()}),[]);var Y=function(){var e=(0,i.Z)((function(){var e,n,o,i,t,a,r,s,d,c,v,m;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return e="".concat(W,"/mobileapp/WebApi/GetStaticDeliveryInfo?order_id=").concat(y,"&json=1"),[4,u.Z.get(e)];case 1:return 1===(n=l.sent()).data.code&&(U(null===(o=n.data.details)||void 0===o?void 0:o.logo),a=n.data.details,r=a.latitude,s=a.longitude,d=n.data.details,c=d.customer_lat,v=d.customer_long,m={driverName:null===(i=n.data.details)||void 0===i?void 0:i.driver_name,phone:null===(t=n.data.details)||void 0===t?void 0:t.driver_phone},_&&_(m),r&&s&&F({lat:Number(r),lng:Number(s)}),c&&v&&G({lat:Number(c),lng:Number(v)})),console.log("loading => static resp",n),[2]}}))}));return function(){return e.apply(this,arguments)}}();return X?(0,a.jsxs)(d.b6,{mapContainerStyle:V,center:I,zoom:13,onLoad:function(){setTimeout((function(){q(!0)}),100)},children:[(0,a.jsx)(d.mF,{options:{origin:T,destination:R,travelMode:"DRIVING"},callback:function(e,n){"OK"!==n||A||(L(!0),Z(e))}}),P&&B&&(0,a.jsx)(d.tH,{directions:P,options:{polylineOptions:{strokeColor:"#FF0000",strokeOpacity:0,icons:[{icon:{path:"M 0,-1 0,1",strokeOpacity:1,scale:4},offset:"0",repeat:"20px"}]},suppressMarkers:!0}}),I&&B&&(0,a.jsx)(d.jC,{position:I,icon:{url:"/rider1.png",scaledSize:{width:70,height:70}}}),T&&B&&(0,a.jsx)(d.jC,{position:T,icon:{url:H||"/shop1.png",scaledSize:{width:60,height:60}}}),R&&B&&(0,a.jsx)(d.jC,{position:R,icon:{url:"/user1.png",scaledSize:{width:80,height:80}}})]}):(0,a.jsx)("div",{className:"mt-4 w-100 mx-auto d-flex justify-content-center",children:(0,a.jsx)(c.$j,{color:"danger",size:"md",type:"border",style:{height:"4rem",width:"4rem"},children:"Loading..."})})}},66680:function(e,n,o){o.d(n,{JT:function(){return r},i7:function(){return l},xZ:function(){return t},yj:function(){return a}});var i=o(16371),t=function(e){var n,o,t,l,a,r,s,d,c,u,v,m,p,h,g,f,_,x,y,j,N,b,w,k,S,I,M,C,P,Z,O,A,L,E,T,F,D,R;return{name:null===e||void 0===e||null===(n=e.details)||void 0===n||null===(o=n.merchantInfo)||void 0===o?void 0:o.restaurant_name,title:(0,i.x)(null===e||void 0===e||null===(t=e.details)||void 0===t||null===(l=t.context)||void 0===l?void 0:l.merchant_meta_title),favIcon:(null===e||void 0===e||null===(a=e.details)||void 0===a||null===(r=a.merchantInfo)||void 0===r?void 0:r.favicon)||null,logo:"200221"===(null===e||void 0===e||null===(s=e.details)||void 0===s||null===(d=s.merchantInfo)||void 0===d?void 0:d.merchant_id)?"assets/images/chopchopwok-favicon.ico":null===e||void 0===e||null===(c=e.details)||void 0===c||null===(u=c.merchantInfo)||void 0===u?void 0:u.logo,description:(0,i.x)(null===e||void 0===e||null===(v=e.details)||void 0===v||null===(m=v.context)||void 0===m?void 0:m.merchant_meta_description),merchantId:null===e||void 0===e||null===(p=e.details)||void 0===p||null===(h=p.merchantInfo)||void 0===h?void 0:h.merchant_id,fontFamily:null===e||void 0===e||null===(g=e.details)||void 0===g||null===(f=g.merchantInfo)||void 0===f?void 0:f.merchant_font_family_url,facebookDomainVerification:null===e||void 0===e||null===(_=e.details)||void 0===_||null===(x=_.options)||void 0===x?void 0:x.fb_domain_verification_code,googleSiteVerification:null===e||void 0===e||null===(y=e.details)||void 0===y||null===(j=y.options)||void 0===j?void 0:j.google_site_verification,googleAdsenseAccount:(null===e||void 0===e||null===(N=e.details)||void 0===N||null===(b=N.trackers)||void 0===b?void 0:b.merchant_google_adsense_code)||null,canonical_url:null===e||void 0===e||null===(w=e.details)||void 0===w||null===(k=w.context)||void 0===k?void 0:k.canonical_url,snapMeta:(null===e||void 0===e||null===(S=e.details)||void 0===S||null===(I=S.options)||void 0===I?void 0:I.snap_snippet_option)||(null===e||void 0===e||null===(M=e.details)||void 0===M||null===(C=M.trackers)||void 0===C?void 0:C.snapchat_integration_key)||null,clarityMeta:(null===e||void 0===e||null===(P=e.details)||void 0===P||null===(Z=P.options)||void 0===Z?void 0:Z.clarity_snippet)||null,tiktokMeta:(null===e||void 0===e||null===(O=e.details)||void 0===O||null===(A=O.options)||void 0===A?void 0:A.tiktok_integration_key)||null,snapChatMeta:(null===e||void 0===e||null===(L=e.details)||void 0===L||null===(E=L.trackers)||void 0===E?void 0:E.snapchat_integration_key)||(null===e||void 0===e||null===(T=e.details)||void 0===T||null===(F=T.options)||void 0===F?void 0:F.snap_snippet_option)||null,backgroundColor:(null===e||void 0===e||null===(D=e.details)||void 0===D||null===(R=D.options)||void 0===R?void 0:R.merchant_background_color)||null}},l=function(e,n){return{name:null===e||void 0===e?void 0:e.merchant_name,title:(null===e||void 0===e?void 0:e.merchant_meta_title)?(0,i.x)(null===e||void 0===e?void 0:e.merchant_meta_title):null===e||void 0===e?void 0:e.merchant_name,logo:"200221"===(null===e||void 0===e?void 0:e.merchant_id)?"assets/images/chopchopwok-favicon.ico":"".concat(n).concat(e.merchant_logo),description:(null===e||void 0===e?void 0:e.merchant_meta_description)?(0,i.x)(null===e||void 0===e?void 0:e.merchant_meta_description):"",favIcon:(null===e||void 0===e?void 0:e.merchant_favicon)||"".concat(n).concat(e.merchant_logo),merchantId:null===e||void 0===e?void 0:e.merchant_id,fontFamily:null===e||void 0===e?void 0:e.merchant_font_family_url,facebookDomainVerification:null,backgroundColor:null===e||void 0===e?void 0:e.merchant_background_color}};function a(e,n,o){var t,l,a,r,d,c,u,v=(null===e||void 0===e||null===(t=e.raw)||void 0===t?void 0:t.meta_data)&&(null===e||void 0===e?void 0:e.raw.meta_data.length)>0?JSON.parse(null===e||void 0===e?void 0:e.raw.meta_data):null,m=(null===v||void 0===v?void 0:v.item_meta_title)?(0,i.x)(null===v||void 0===v?void 0:v.item_meta_title):null===e||void 0===e?void 0:e.item_name,p=(null===v||void 0===v?void 0:v.item_meta_description)?(0,i.x)(null===v||void 0===v?void 0:v.item_meta_description):null===e||void 0===e?void 0:e.item_description,h=function(e,n){var o,i,t="",l=(null===e||void 0===e||null===(o=e.raw)||void 0===o?void 0:o.meta_data)?JSON.parse(null===e||void 0===e||null===(i=e.raw)||void 0===i?void 0:i.meta_data):null;l&&(null===l||void 0===l?void 0:l.item_canonical_url)?t=null===l||void 0===l?void 0:l.item_canonical_url:n&&(null===e||void 0===e?void 0:e.item_slug)&&(t="https://"+n+"/product/"+(null===e||void 0===e?void 0:e.item_slug));return t}(e,o),g=(null===v||void 0===v?void 0:v.merchant_font_family_url)?null===v||void 0===v?void 0:v.merchant_font_family_url:"",f=(null===n||void 0===n||null===(l=n.staticSettings)||void 0===l||null===(a=l.setting)||void 0===a?void 0:a.merchantInfo)?null===(r=n.staticSettings)||void 0===r||null===(d=r.setting)||void 0===d?void 0:d.merchantInfo:null,_=(null===f||void 0===f?void 0:f.favicon)||(null===f||void 0===f?void 0:f.logo);return{title:m,description:p,image:(null===e||void 0===e?void 0:e.photo)?e.photo:null,logo:s(_,null===n||void 0===n?void 0:n.staticSettings),brandName:(null===f||void 0===f?void 0:f.restaurant_name)?null===f||void 0===f?void 0:f.restaurant_name:"",canonicalUrl:h,fontFamily:g,price:(null===e||void 0===e?void 0:e.prices)&&0!==(null===e||void 0===e||null===(c=e.prices)||void 0===c?void 0:c.length)?null===(u=null===e||void 0===e?void 0:e.prices[0])||void 0===u?void 0:u.price:0,currencyCode:(null===e||void 0===e?void 0:e.currency_code)?null===e||void 0===e?void 0:e.currency_code:"PKR"}}function r(e,n,o){var t,l,a,r,d,c,u=null===e||void 0===e?void 0:e.catMeta,v=(null===u||void 0===u?void 0:u.meta_title)?(0,i.x)(null===u||void 0===u?void 0:u.meta_title):null===e||void 0===e?void 0:e.category_name,m=(null===u||void 0===u?void 0:u.meta_description)?(0,i.x)(null===u||void 0===u?void 0:u.meta_description):null===e||void 0===e?void 0:e.category_description,p=function(e,n){var o,i="",t=null===e||void 0===e?void 0:e.catMeta;if(t&&(null===t||void 0===t?void 0:t.meta_canonical_url))i=null===t||void 0===t?void 0:t.meta_canonical_url;else if(n&&(null===e||void 0===e||null===(o=e.catDetails)||void 0===o?void 0:o.slug)){var l;i="https://"+n+"/category/"+(null===e||void 0===e||null===(l=e.catDetails)||void 0===l?void 0:l.slug)}return i}(e,o),h=(null===u||void 0===u?void 0:u.merchant_font_family_url)?null===u||void 0===u?void 0:u.merchant_font_family_url:"",g=(null===n||void 0===n||null===(t=n.staticSettings)||void 0===t||null===(l=t.setting)||void 0===l?void 0:l.merchantInfo)?null===(a=n.staticSettings)||void 0===a||null===(r=a.setting)||void 0===r?void 0:r.merchantInfo:null,f=(null===g||void 0===g?void 0:g.favicon)||(null===g||void 0===g?void 0:g.logo);return{title:v,description:m,image:(null===e||void 0===e?void 0:e.photo)?e.photo:null,logo:s(f,null===n||void 0===n?void 0:n.staticSettings),brandName:(null===g||void 0===g?void 0:g.restaurant_name)?null===g||void 0===g?void 0:g.restaurant_name:"",canonicalUrl:p,fontFamily:h,price:(null===e||void 0===e?void 0:e.prices)&&0!==(null===e||void 0===e||null===(d=e.prices)||void 0===d?void 0:d.length)?null===(c=null===e||void 0===e?void 0:e.prices[0])||void 0===c?void 0:c.price:0,currencyCode:(null===e||void 0===e?void 0:e.currency_code)?null===e||void 0===e?void 0:e.currency_code:"PKR"}}function s(e,n){var o=e;return e||(o=null===n||void 0===n?void 0:n.logo),o}},22827:function(e,n,o){o.d(n,{Z:function(){return M}});var i=o(47568),t=o(26042),l=o(69396),a=o(828),r=o(36305),s=o(70655),d=o(85893),c=o(67294),u=o(50450),v=o(20906),m=(o(51391),o(41248)),p=o(73455),h=o(40013),g=(o(96486),function(e){e.setUserAddress,e.userAddress;var n=(0,m.I0)(),o=((0,m.v9)((function(e){return e.checkout.customer})),(0,m.v9)((function(e){return e.settings.selectedCity})),h.tO.getData("area")&&JSON.parse(h.tO.getData("area")),(0,a.Z)((0,c.useState)(!0),2)),i=o[0],t=(o[1],(0,v.ZP)({requestOptions:{componentRestrictions:{country:["pk"]}}})),l=(t.ready,t.value,t.suggestions);l.status,l.data;return(0,c.useEffect)((function(){i&&navigator.geolocation.getCurrentPosition((function(e){var o=e.coords,i=o.latitude,t=o.longitude;n((0,p.hI)({lat:i,lng:t})),localStorage.setItem("coordinates",JSON.stringify({lat:i,lng:t}))}),(function(e){console.error(e)}))}),[i]),(0,d.jsx)(d.Fragment,{})}),f=o(37054),_=o(5434),x=o(22920),y=o(86896),j=function(e){e.setUserAddress,e.userAddress;var n=(0,a.Z)((0,c.useState)(!1),2),o=n[0],t=n[1],l=(0,a.Z)((0,c.useState)(null),2),r=(l[0],l[1]),u=(0,m.v9)((function(e){return e.settings.selectedCoords})),v=(0,m.I0)(),h=(0,y.Z)(),g=((0,c.useRef)(null),function(){var e=(0,i.Z)((function(e){var n,o,i;return(0,s.__generator)(this,(function(t){return e&&(n=e.latLng,o=n.lat(),i=n.lng(),v((0,p.hI)({lat:o,lng:i})),localStorage.setItem("coordinates",JSON.stringify({lat:o,lng:i}))),[2]}))}));return function(n){return e.apply(this,arguments)}}());return(0,d.jsxs)("div",{className:"position-relative",children:[(0,d.jsx)(f.b6,{onLoad:function(){setTimeout((function(){t(!0)}),100)},zoom:14,center:u,mapContainerClassName:"map-container",children:u&&o&&(0,d.jsx)(f.Jx,{position:{lat:u.lat,lng:u.lng},draggable:!0,onDragEnd:g})}),(0,d.jsx)("button",{onClick:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var n=e.coords.latitude,o=e.coords.longitude;r({lat:n,lng:o}),v((0,p.hI)({lat:n,lng:o})),localStorage.setItem("coordinates",JSON.stringify({lat:n,lng:o}))}),(function(e){x.Am.warning(h.formatMessage({id:"allowLocationAccess"}),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"colored"}),console.error("Error getting user location:",e)}))},className:"rounded shadow-lg text-primary bg-light border border-primary d-flex align-items-center justify-content-center p-1",style:{position:"absolute",left:10,top:70,fontSize:24,height:40,width:40},children:(0,d.jsx)(_.x$F,{})})]})},N=["places"],b=function(e){var n=e.setUserAddress,o=e.userAddress,i=e.googleApiKey;return(0,f.Db)({googleMapsApiKey:i,libraries:N}).isLoaded?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(j,{setUserAddress:n,userAddress:o})}):(0,d.jsx)("div",{className:"mt-4 w-100 mx-auto d-flex justify-content-center p-4",children:(0,d.jsx)(u.$j,{color:"danger",size:"xl",type:"border",style:{height:"4rem",width:"4rem"},children:"Loading..."})})},w=o(99691),k=o(29408),S=o(70893),I=o(11163),M=function(e){var n=e.userAddresses,o=e.setUserAddresses,v=e.apiKey,h=(0,I.useRouter)().asPath,f=(0,I.useRouter)().query.id,_=(0,m.v9)((function(e){return e.settings.showGoogleMapModal})),j=(0,m.v9)((function(e){var n;return null===(n=e.settings.staticSettings)||void 0===n?void 0:n.setting})),N=(0,m.v9)((function(e){return e.settings.selectedCoords})),M=(0,w.AK)("city_detail"),C=(0,w.AK)("defaultBranch"),P=(0,m.I0)(),Z=(0,y.Z)(),O=(0,S.xQ)().apiUrl,A=(0,a.Z)((0,c.useState)({address:"",city:null===M||void 0===M?void 0:M.label,country:null===C||void 0===C?void 0:C.country}),2),L=A[0],E=A[1],T=(0,a.Z)((0,c.useState)(""),2),F=T[0],D=T[1],R=(0,a.Z)((0,c.useState)(!1),2),G=R[0],z=R[1],H=(0,a.Z)((0,c.useState)(!1),2),U=H[0],J=H[1];(0,c.useEffect)((function(){(null===j||void 0===j?void 0:j.main_screen_google_map_api_key)?D(null===j||void 0===j?void 0:j.main_screen_google_map_api_key):v&&D(v)}),[j]),(0,c.useEffect)((function(){console.log("loading => userAddresses",n),(null===n||void 0===n?void 0:n.length)&&P((0,p.OK)(n))}),[n]);var B=function(){var e=(0,i.Z)((function(){var e,n;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),N&&N.lat&&N.lng?(J(!0),console.log("loading => selectedCoords",N),[4,(0,k.G8)(N,f,O)]):(x.Am.error(Z.formatMessage({id:"noCoordinates"})),[2,!1]);case 1:return e=o.sent(),console.log("loading => handleUpdateDeliveryAddress",e),e&&(J(!1),P((0,p.aE)(!_))),[3,3];case 2:return n=o.sent(),console.error("error occur while updating address",n),J(!1),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(u.u_,{isOpen:_,centered:!0,size:"md",toggle:function(){"/guestcheckout"!==h&&!h.includes("receipt")&&P((0,p.aE)(!_))},children:(0,d.jsxs)(u.fe,{children:[F?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"places-container w-75",style:{zIndex:999999999},children:(0,d.jsx)(g,{setUserAddress:E,userAddress:L})}),(0,d.jsx)("div",{className:"",children:(0,d.jsx)(b,{setUserAddress:E,userAddress:L,googleApiKey:F})})]}):null,"/guestcheckout"===h||h.includes("receipt")?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.X2,{className:"mt-4",children:(0,d.jsx)(u.JX,{md:"12",className:"m-auto",children:(0,d.jsxs)(u.zx,{className:"w-100",color:"indolj-primary",onClick:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var n=e.coords.latitude,o=e.coords.longitude;console.log("position getting user location:",e),P((0,p.hI)({lat:n,lng:o})),localStorage.setItem("coordinates",JSON.stringify({lat:n,lng:o}))}),(function(e){x.Am.warning(Z.formatMessage({id:"allowLocationAccess"}),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"colored"}),console.error("Error getting user location:",e)}))},children:[Z.formatMessage({id:"LocateMe"})," ",U?(0,d.jsx)(u.$j,{}):null]})})}),(0,d.jsx)(u.X2,{className:"mt-1",children:(0,d.jsx)(u.JX,{md:"12",className:"m-auto",children:(0,d.jsxs)(u.zx,{className:"w-100",color:"indolj-primary",onClick:function(){P((0,p.aE)(!_)),h.includes("receipt")&&B()},children:[Z.formatMessage({id:"saveLocation"})," ",U?(0,d.jsx)(u.$j,{}):null]})})})]}):(0,d.jsxs)(u.X2,{className:"mt-2",children:[(0,d.jsx)(u.JX,{md:"12"}),(0,d.jsx)(u.JX,{md:"6",className:"mt-2",children:(0,d.jsx)(u.II,{type:"text",name:"address",id:"address",placeholder:"Address",value:L.address,onChange:function(e){return E((0,l.Z)((0,t.Z)({},L),{address:e.target.value}))}})}),(0,d.jsx)(u.JX,{md:"6",className:"mt-2",children:(0,d.jsx)(u.II,{type:"text",name:"city",id:"city",placeholder:"City",value:L.city,onChange:function(e){return E((0,l.Z)((0,t.Z)({},L),{city:e.target.value}))}})}),(0,d.jsx)(u.JX,{md:"12",children:(0,d.jsx)(u.X2,{children:(0,d.jsx)(u.JX,{md:"9",className:"mt-3",children:(0,d.jsxs)(u.cw,{switch:!0,children:[(0,d.jsx)(u.__,{check:!0,children:Z.formatMessage({id:"Set as default address"})}),(0,d.jsx)(u.II,{type:"switch",checked:G,onClick:function(){z(!G)}})]})})})}),(0,d.jsx)(u.JX,{md:"6"}),(0,d.jsxs)(u.JX,{md:"6",className:"mt-3 d-flex justify-content-around",children:[(0,d.jsx)(u.JX,{sm:"6",md:"6",className:"p-0 px-1",children:(0,d.jsx)(u.zx,{color:"danger",onClick:function(){return P((0,p.aE)(!_))},children:"Cancel"})}),(0,d.jsx)(u.JX,{sm:"6",md:"6",className:"p-0 px-1",children:(0,d.jsx)(u.zx,{color:"indolj-primary",className:"px-4",onClick:function(){return function(){try{var e;if(!L.address)return x.Am.error(Z.formatMessage({id:"Please enter a valid address."}),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"colored"}),!1;var i={city:L.city,location_name:L.address,as_default:G,client_token:null===(e=(0,w.AK)("otp_details").user)||void 0===e?void 0:e.token};J(!0),(0,k.gn)(O,i).then((function(e){console.log("laoding => create address resp",e),J(!1),e&&1===e.data.code&&(P((0,p.aE)(!1)),o((null===n||void 0===n?void 0:n.length)>0?(0,r.Z)(n).concat([e.data.details]):[e.data.details]),E({address:"",city:"",country:""}),x.Am.success(Z.formatMessage({id:"addressAddedSuccess"}),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:!1,theme:"colored"}))}))}catch(t){console.error("error occur while adding address",t),J(!1)}}()},children:U?(0,d.jsx)(u.$j,{size:"sm"}):Z.formatMessage({id:"Save"})})})]})]})]})})})}},88446:function(e,n,o){o.d(n,{bn:function(){return u},c7:function(){return m},hR:function(){return v}});var i=o(47568),t=o(26042),l=o(70655),a=o(99691),r=o(77561),s=function(){var e=(0,i.Z)((function(e,n){var o,i,t;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:o={json:"1"},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,r.P)("POST",n,"GoogleAnalytics",JSON.stringify(e),o)];case 2:return(i=l.sent())&&1===i.code?(console.log("loading => axios GoogleAnalytics success",i),[2,{data:i}]):[3,4];case 3:return t=l.sent(),console.log("loading => axios GoogleAnalytics error",t),[3,4];case 4:return[2]}}))}));return function(n,o){return e.apply(this,arguments)}}(),d=function(e){return["138","148"].includes(e)},c=function(e){return["200185"].includes(e)},u=function(e){window.gtag&&(window.gtag("event",e,{event_category:"Purchase",event_label:"Purchase Completed"}),console.log("Purchase event tracked!"))},v=function(){var e=(0,i.Z)((function(e,n,i,a){var r,u,v,m,p,h,g,f,_,x,y,j,N,b,w,k,S,I,M,C,P,Z,O,A,L,E=arguments;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return r=E.length>4&&void 0!==E[4]?E[4]:null,E.length>5&&void 0!==E[5]&&E[5],u=E.length>6?E[6]:void 0,v=E.length>7?E[7]:void 0,m=E.length>8?E[8]:void 0,p=E.length>9?E[9]:void 0,h=E.length>10&&void 0!==E[10]?E[10]:"PKR",g=E.length>11&&void 0!==E[11]?E[11]:null,f=E.length>12&&void 0!==E[12]?E[12]:null,["checkout","purchase"].includes(e)?(y=r||"event_".concat((new Date).getTime()),j=d(a),N=[],b=[],w=0,k=[],S=[],[4,Promise.resolve().then(o.bind(o,90033))]):[2];case 1:if(I=l.sent().getPlatformAttributionData,M=I("facebook"),C=I("google"),console.log("Facebook attribution data:",M),console.log("Google attribution data:",C),n.map((function(e){N.push({item_name:null===e||void 0===e?void 0:e.item_name,item_id:null===e||void 0===e?void 0:e.item_id,item_category:null===e||void 0===e?void 0:e.category_name,price:parseInt(null===e||void 0===e?void 0:e.displayPrice),quantity:null===e||void 0===e?void 0:e.qty}),S.push({product_name:null===e||void 0===e?void 0:e.item_name,product_id:null===e||void 0===e?void 0:e.item_id,category_name:null===e||void 0===e?void 0:e.category_name,product_amount:parseInt(null===e||void 0===e?void 0:e.displayPrice),product_quantity:null===e||void 0===e?void 0:e.qty}),b.push({name:null===e||void 0===e?void 0:e.item_name,id:null===e||void 0===e?void 0:e.item_id,category:null===e||void 0===e?void 0:e.category_name,price:parseInt(null===e||void 0===e?void 0:e.displayPrice),quantity:null===e||void 0===e?void 0:e.qty}),k.push(null===e||void 0===e?void 0:e.item_id),w+=null===e||void 0===e?void 0:e.qty})),P={num_items:w,content_ids:k,value:parseFloat(i),content_type:"product",currency:(null===(_=null===h||void 0===h?void 0:h.toLowerCase())||void 0===_?void 0:_.includes("rs"))?"PKR":h,referrer:(null===M||void 0===M?void 0:M.referrer)||"",landing_page:(null===M||void 0===M?void 0:M.landing_page)||"",client_user_agent:(null===M||void 0===M?void 0:M.client_user_agent)||"",_fbp:(null===M||void 0===M?void 0:M._fbp)||""},Z={items:j?b:N,currency:(null===(x=null===h||void 0===h?void 0:h.toLowerCase())||void 0===x?void 0:x.includes("rs"))?"PKR":h,gclid:(null===C||void 0===C?void 0:C._gclid)||"",gcl_au:(null===C||void 0===C?void 0:C._gcl_au)||"",_ga:(null===C||void 0===C?void 0:C._ga)||"",_gid:(null===C||void 0===C?void 0:C._gid)||""},{order_id:r,shipping:(null===u||void 0===u?void 0:u.delivery_charge)?null===u||void 0===u?void 0:u.delivery_charge:0,tax:null===u||void 0===u?void 0:u.taxable_total,discount:null===u||void 0===u?void 0:u.discounted_amount,cart_total:parseFloat(null===u||void 0===u?void 0:u.sub_total),cart_items:S,branch:v},"purchase"===e?(O="Purchase",P.tax=null===u||void 0===u?void 0:u.tax,P.shipping=null===u||void 0===u?void 0:u.delivery_charges,P.payment_type=null===u||void 0===u?void 0:u.payment_type,P.ct=g||null,P.st=f||null,A="purchase",Z.transaction_id=r,Z.tax=null===u||void 0===u?void 0:u.tax,Z.shipping=null===u||void 0===u?void 0:u.delivery_charges,Z.payment_type=null===u||void 0===u?void 0:u.payment_type,Z.value=parseFloat(i)):"checkout"===e&&(O="InitiateCheckout",A="begin_checkout"),"gtag"in window&&"function"===typeof window.gtag){localStorage.setItem("initiateCheckout","1"),console.log("loading => gtag is about to be called"),L={order_id:r,payload:{event:A,gTagPayload:Z}},m&&s(L,m).then((function(e){e&&console.log("loading => gtag server response",e)}));try{c(a)&&"purchase"===A&&window.gtag("event","conversion_event_purchase",Z),window.gtag("event",A,Z),console.log("Gtag fired =>",A,Z)}catch(T){console.error("Gtag failed =>",T)}}return[4,Promise.resolve().then(o.bind(o,90033))];case 2:return(0,l.sent().shouldBlockMetaEvents)()?console.warn("\u26a0\ufe0f Meta events blocked for this domain"):o.e(1767).then(o.t.bind(o,51767,23)).then((function(e){return e.default})).then((function(e){var n=(0,t.Z)({},P);e.track(O,n,{eventID:y}),console.log("====>Facebook Pixel payload sent (Facebook-specific only):",n)})),localStorage.setItem("analyticsTriggered",r),localStorage.setItem("checkout_and_purchase_event",y),localStorage.removeItem("hasOrdered"),console.log("====>Gtag payload sent:",Z),console.log("====>Facebook Pixel payload sent:",P),p&&window.close(),[2]}}))}));return function(n,o,i,t){return e.apply(this,arguments)}}(),m=function(e){var n=e.items,o=e.delivery_charge,i=e.order_id_hex,t=e.taxable_total,l=e.raw_discounted_amount,r=e.raw_sub_total,s=e.branch,d=[];n.map((function(e){d.push({product_name:null===e||void 0===e?void 0:e.item_name,product_id:null===e||void 0===e?void 0:e.item_id,category_name:null===e||void 0===e?void 0:e.category_name,product_amount:Number(null===e||void 0===e?void 0:e.raw_price),product_quantity:null===e||void 0===e?void 0:e.qty}),null===e||void 0===e?void 0:e.qty}));var c={order_id:i,shipping:o||0,tax:t,discount:Number(l),cart_total:Number(r),cart_items:d,branch:s};console.log("loading => savyour payload",c),console.log("Saving order to Savyour");var u=(0,a.AK)("siteLogs");u&&(u.savyourPayload=c,localStorage.setItem("siteLogs",JSON.stringify(u)));try{null===window||void 0===window||window.savyour("orderPlace",c)}catch(v){console.error("Savyour failed =>",v)}}}}]);